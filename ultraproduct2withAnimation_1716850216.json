{
  "last_node_id": 548,
  "last_link_id": 1222,
  "nodes": [
    {
      "id": 86,
      "type": "CLIPTextEncode",
      "pos": [
        -2406.8422314670142,
        573.3674282633426
      ],
      "size": {
        "0": 400,
        "1": 200
      },
      "flags": {},
      "order": 55,
      "mode": 0,
      "inputs": [
        {
          "name": "clip",
          "type": "CLIP",
          "link": 340
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "links": [
            545
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "CLIPTextEncode"
      },
      "widgets_values": [
        "nsfw"
      ]
    },
    {
      "id": 198,
      "type": "Note",
      "pos": [
        229,
        857
      ],
      "size": {
        "0": 210,
        "1": 58
      },
      "flags": {},
      "order": 0,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "Regulate light intensity here.\nMAX = 1 is max light intensity."
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 79,
      "type": "Reroute",
      "pos": [
        348,
        463
      ],
      "size": [
        75,
        26
      ],
      "flags": {},
      "order": 60,
      "mode": 0,
      "inputs": [
        {
          "name": "",
          "type": "*",
          "link": 983
        }
      ],
      "outputs": [
        {
          "name": "VAE",
          "type": "VAE",
          "links": [
            326,
            327,
            328,
            329
          ],
          "slot_index": 0
        }
      ],
      "properties": {
        "showOutputText": true,
        "horizontal": false
      }
    },
    {
      "id": 199,
      "type": "Note",
      "pos": [
        657,
        280
      ],
      "size": {
        "0": 332.4533386230469,
        "1": 66.57398986816406
      },
      "flags": {},
      "order": 1,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "Multiplier's best values (in my testings) are between 0.15 and 0.21"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 201,
      "type": "Note",
      "pos": [
        -80,
        50
      ],
      "size": {
        "0": 373.7008361816406,
        "1": 96.51365661621094
      },
      "flags": {},
      "order": 2,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "Use iclight_sd15_fc model for no backgrounds workflows,\nuse the fbc model for background workflows.\nModels found here: https://huggingface.co/lllyasviel/ic-light/tree/main"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 157,
      "type": "Note",
      "pos": [
        -890,
        320
      ],
      "size": {
        "0": 302.2235107421875,
        "1": 69.18132019042969
      },
      "flags": {},
      "order": 3,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "Optional Load Image node to load the subject directly instead of generating it.\nConnect it to the image resize node input."
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 76,
      "type": "PreviewImage",
      "pos": [
        589,
        991
      ],
      "size": {
        "0": 363.1117858886719,
        "1": 392.6006164550781
      },
      "flags": {},
      "order": 86,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 318
        }
      ],
      "properties": {
        "Node name for S&R": "PreviewImage"
      }
    },
    {
      "id": 78,
      "type": "VAEEncode",
      "pos": [
        394,
        394
      ],
      "size": {
        "0": 210,
        "1": 46
      },
      "flags": {},
      "order": 116,
      "mode": 0,
      "inputs": [
        {
          "name": "pixels",
          "type": "IMAGE",
          "link": 482,
          "slot_index": 0
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": 326,
          "slot_index": 1
        }
      ],
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "links": [
            593
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "VAEEncode"
      }
    },
    {
      "id": 200,
      "type": "Note",
      "pos": [
        1035,
        265
      ],
      "size": {
        "0": 312.00201416015625,
        "1": 73.6064224243164
      },
      "flags": {},
      "order": 4,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "Tested with CFG between 2 and 3"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 77,
      "type": "ICLightConditioning",
      "pos": [
        652,
        399
      ],
      "size": {
        "0": 342.5999755859375,
        "1": 138
      },
      "flags": {},
      "order": 118,
      "mode": 0,
      "inputs": [
        {
          "name": "positive",
          "type": "CONDITIONING",
          "link": 893
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "link": 540
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": 327
        },
        {
          "name": "foreground",
          "type": "LATENT",
          "link": 593
        },
        {
          "name": "opt_background",
          "type": "LATENT",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "positive",
          "type": "CONDITIONING",
          "links": [
            335
          ],
          "shape": 3,
          "slot_index": 0
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "links": [
            336
          ],
          "shape": 3,
          "slot_index": 1
        },
        {
          "name": "empty_latent",
          "type": "LATENT",
          "links": [],
          "shape": 3,
          "slot_index": 2
        }
      ],
      "properties": {
        "Node name for S&R": "ICLightConditioning"
      },
      "widgets_values": [
        0.15
      ]
    },
    {
      "id": 50,
      "type": "VAEEncode",
      "pos": [
        736,
        594
      ],
      "size": {
        "0": 210,
        "1": 46
      },
      "flags": {},
      "order": 85,
      "mode": 0,
      "inputs": [
        {
          "name": "pixels",
          "type": "IMAGE",
          "link": 221
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": 329,
          "slot_index": 1
        }
      ],
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "links": [
            592
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "VAEEncode"
      }
    },
    {
      "id": 37,
      "type": "LoadAndApplyICLightUnet",
      "pos": [
        -80,
        200
      ],
      "size": {
        "0": 381.3333740234375,
        "1": 58
      },
      "flags": {},
      "order": 99,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 980
        }
      ],
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": [
            137
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "LoadAndApplyICLightUnet"
      },
      "widgets_values": [
        "iclight_sd15_fc.safetensors"
      ]
    },
    {
      "id": 209,
      "type": "CLIPTextEncode",
      "pos": [
        -3551.2234157985995,
        1484.8891465928905
      ],
      "size": {
        "0": 400,
        "1": 200
      },
      "flags": {},
      "order": 57,
      "mode": 0,
      "inputs": [
        {
          "name": "clip",
          "type": "CLIP",
          "link": 605
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "links": [
            608
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "CLIPTextEncode"
      },
      "widgets_values": [
        "nsfw"
      ]
    },
    {
      "id": 211,
      "type": "VAEDecode",
      "pos": [
        -2991.2234157985995,
        1584.889146592891
      ],
      "size": {
        "0": 210,
        "1": 46
      },
      "flags": {},
      "order": 107,
      "mode": 0,
      "inputs": [
        {
          "name": "samples",
          "type": "LATENT",
          "link": 610
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": 611,
          "slot_index": 1
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            612
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "VAEDecode"
      }
    },
    {
      "id": 217,
      "type": "Image Blend by Mask",
      "pos": [
        -1999.4182238381368,
        2516.308836345719
      ],
      "size": {
        "0": 315,
        "1": 98
      },
      "flags": {},
      "order": 111,
      "mode": 0,
      "inputs": [
        {
          "name": "image_a",
          "type": "IMAGE",
          "link": 619
        },
        {
          "name": "image_b",
          "type": "IMAGE",
          "link": 620
        },
        {
          "name": "mask",
          "type": "IMAGE",
          "link": 623
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            624
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "Image Blend by Mask"
      },
      "widgets_values": [
        1
      ]
    },
    {
      "id": 7,
      "type": "VAEDecode",
      "pos": [
        1376,
        575
      ],
      "size": {
        "0": 210,
        "1": 46
      },
      "flags": {},
      "order": 120,
      "mode": 0,
      "inputs": [
        {
          "name": "samples",
          "type": "LATENT",
          "link": 77
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": 328,
          "slot_index": 1
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            642
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "VAEDecode"
      }
    },
    {
      "id": 246,
      "type": "Note",
      "pos": [
        -1993.8618816072462,
        2669.1968843057934
      ],
      "size": {
        "0": 268.28192138671875,
        "1": 102.73438262939453
      },
      "flags": {},
      "order": 5,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "This Group blends the original image on top of the new background"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 247,
      "type": "Note",
      "pos": [
        -1927.8618816072462,
        2935.1968843057934
      ],
      "size": {
        "0": 268.28192138671875,
        "1": 102.73438262939453
      },
      "flags": {},
      "order": 6,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "If you wish to relight the image by using a mask, you can either create a mask here using the open in mask editor option, or by using a pre-existing mask in the relight Group. Connect the appropriate mask output."
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 196,
      "type": "Note",
      "pos": [
        222,
        1389
      ],
      "size": {
        "0": 309.9846496582031,
        "1": 102.63199615478516
      },
      "flags": {},
      "order": 7,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "You can open the Load Image node in Mask editor, create a mask and plug the mask output from the Preview Bridge node in the Blend original subject Group, or plug in a Load Image as mask node here as well if you don't want to create a mask via Photoshop or other tools."
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 259,
      "type": "ImageInvert",
      "pos": [
        -7.632592606855059,
        1763.1778926171667
      ],
      "size": {
        "0": 140,
        "1": 26
      },
      "flags": {},
      "order": 93,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 677
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            679
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "ImageInvert"
      }
    },
    {
      "id": 85,
      "type": "CLIPTextEncode",
      "pos": [
        -2406.8422314670142,
        303.36742826334194
      ],
      "size": {
        "0": 400,
        "1": 200
      },
      "flags": {},
      "order": 54,
      "mode": 0,
      "inputs": [
        {
          "name": "clip",
          "type": "CLIP",
          "link": 339
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "links": [
            560
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "CLIPTextEncode"
      },
      "widgets_values": [
        "product photography, still life photography of a whiskey bottle, white backdrop"
      ]
    },
    {
      "id": 272,
      "type": "ImageInvert",
      "pos": [
        31.61260928754275,
        2476.344751228503
      ],
      "size": {
        "0": 140,
        "1": 26
      },
      "flags": {},
      "order": 139,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 698
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            700
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "ImageInvert"
      }
    },
    {
      "id": 276,
      "type": "ImageInvert",
      "pos": [
        241.61260928754245,
        2646.344751228503
      ],
      "size": {
        "0": 140,
        "1": 26
      },
      "flags": {},
      "order": 149,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 703
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            705
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "ImageInvert"
      }
    },
    {
      "id": 309,
      "type": "Note",
      "pos": [
        -233.08049340020574,
        2002.4210171811246
      ],
      "size": {
        "0": 251.81761169433594,
        "1": 88.38092803955078
      },
      "flags": {},
      "order": 8,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "Generate Frequency Separation layers for original image"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 310,
      "type": "Note",
      "pos": [
        -197.83529150580804,
        2711.587875792468
      ],
      "size": {
        "0": 251.81761169433594,
        "1": 88.38092803955078
      },
      "flags": {},
      "order": 9,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "Generate Frequency Separation layers for relit image"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 261,
      "type": "Image Blending Mode",
      "pos": [
        165.27580604193517,
        1810.1336160654046
      ],
      "size": {
        "0": 221.88836669921875,
        "1": 102
      },
      "flags": {},
      "order": 101,
      "mode": 0,
      "inputs": [
        {
          "name": "image_a",
          "type": "IMAGE",
          "link": 679
        },
        {
          "name": "image_b",
          "type": "IMAGE",
          "link": 680
        }
      ],
      "outputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "links": [
            682
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "Image Blending Mode"
      },
      "widgets_values": [
        "add",
        0.5
      ]
    },
    {
      "id": 257,
      "type": "PreviewImage",
      "pos": [
        432.2758060419349,
        2066.133616065403
      ],
      "size": {
        "0": 210,
        "1": 246
      },
      "flags": {},
      "order": 112,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 772
        }
      ],
      "properties": {
        "Node name for S&R": "PreviewImage"
      }
    },
    {
      "id": 256,
      "type": "PreviewImage",
      "pos": [
        434.2758060419349,
        1772.1336160654046
      ],
      "size": {
        "0": 210,
        "1": 246
      },
      "flags": {},
      "order": 102,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 771
        }
      ],
      "properties": {
        "Node name for S&R": "PreviewImage"
      }
    },
    {
      "id": 270,
      "type": "PreviewImage",
      "pos": [
        461.16470849419204,
        2787.587875792468
      ],
      "size": {
        "0": 210,
        "1": 246
      },
      "flags": {},
      "order": 158,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 776
        }
      ],
      "properties": {
        "Node name for S&R": "PreviewImage"
      }
    },
    {
      "id": 311,
      "type": "Note",
      "pos": [
        770.2022708968956,
        2214.4523603710304
      ],
      "size": {
        "0": 304.7122497558594,
        "1": 118.9118423461914
      },
      "flags": {},
      "order": 10,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "Generate High Frequency composite layer, with details from the original image blended into the high frequency layer of the relit image based on the masked area of the preview bridge node of the relit image"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 271,
      "type": "SplitImageWithAlpha",
      "pos": [
        -188.83529150580793,
        2486.587875792468
      ],
      "size": {
        "0": 185.10531616210938,
        "1": 46
      },
      "flags": {},
      "order": 134,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 1004
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            698,
            699
          ],
          "shape": 3,
          "slot_index": 0
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": null,
          "shape": 3
        }
      ],
      "properties": {
        "Node name for S&R": "SplitImageWithAlpha"
      }
    },
    {
      "id": 227,
      "type": "MaskToImage",
      "pos": [
        823.0200558744681,
        1960.5895696195005
      ],
      "size": {
        "0": 210,
        "1": 26
      },
      "flags": {},
      "order": 125,
      "mode": 0,
      "inputs": [
        {
          "name": "mask",
          "type": "MASK",
          "link": 652
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            653
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "MaskToImage"
      }
    },
    {
      "id": 87,
      "type": "KSampler",
      "pos": [
        -1956.8422314670142,
        283.3674282633421
      ],
      "size": {
        "0": 315,
        "1": 262
      },
      "flags": {
        "collapsed": false
      },
      "order": 64,
      "mode": 4,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 548
        },
        {
          "name": "positive",
          "type": "CONDITIONING",
          "link": 560
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "link": 545
        },
        {
          "name": "latent_image",
          "type": "LATENT",
          "link": 546
        }
      ],
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "links": [
            354
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "KSampler"
      },
      "widgets_values": [
        180794899782057,
        "fixed",
        40,
        3.6,
        "dpmpp_2m_sde",
        "karras",
        1
      ]
    },
    {
      "id": 98,
      "type": "VAEDecode",
      "pos": [
        -1906.8422314670142,
        623.3674282633426
      ],
      "size": {
        "0": 210,
        "1": 46
      },
      "flags": {},
      "order": 72,
      "mode": 4,
      "inputs": [
        {
          "name": "samples",
          "type": "LATENT",
          "link": 354
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": 355,
          "slot_index": 1
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            538
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "VAEDecode"
      }
    },
    {
      "id": 181,
      "type": "EmptyLatentImage",
      "pos": [
        -1956.8422314670142,
        723.3674282633426
      ],
      "size": {
        "0": 315,
        "1": 106
      },
      "flags": {},
      "order": 11,
      "mode": 4,
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "links": [
            546
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "EmptyLatentImage"
      },
      "widgets_values": [
        1024,
        1024,
        1
      ]
    },
    {
      "id": 179,
      "type": "PreviewBridge",
      "pos": [
        -1583.8422314670142,
        290.36742826334205
      ],
      "size": {
        "0": 537.45556640625,
        "1": 534.1554565429688
      },
      "flags": {},
      "order": 84,
      "mode": 4,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 538
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [],
          "shape": 3,
          "slot_index": 0
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": [],
          "shape": 3,
          "slot_index": 1
        }
      ],
      "properties": {
        "Node name for S&R": "PreviewBridge"
      },
      "widgets_values": [
        "$179-0"
      ]
    },
    {
      "id": 215,
      "type": "ControlNetLoader",
      "pos": [
        -3473,
        1917
      ],
      "size": {
        "0": 315,
        "1": 58
      },
      "flags": {},
      "order": 12,
      "mode": 0,
      "outputs": [
        {
          "name": "CONTROL_NET",
          "type": "CONTROL_NET",
          "links": [
            614
          ],
          "shape": 3
        }
      ],
      "properties": {
        "Node name for S&R": "ControlNetLoader"
      },
      "widgets_values": [
        "control_sd15_depth.pth"
      ]
    },
    {
      "id": 316,
      "type": "ControlNetLoader",
      "pos": [
        -3485,
        2277
      ],
      "size": {
        "0": 315,
        "1": 58
      },
      "flags": {},
      "order": 13,
      "mode": 0,
      "outputs": [
        {
          "name": "CONTROL_NET",
          "type": "CONTROL_NET",
          "links": [
            785
          ],
          "shape": 3
        }
      ],
      "properties": {
        "Node name for S&R": "ControlNetLoader"
      },
      "widgets_values": [
        "control_v11p_sd15_lineart.pth"
      ]
    },
    {
      "id": 312,
      "type": "Note",
      "pos": [
        1197.8541857754428,
        2550.0296387254198
      ],
      "size": {
        "0": 210,
        "1": 65.24028015136719
      },
      "flags": {},
      "order": 14,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "Blend HF and LF layers"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 229,
      "type": "ImpactGaussianBlurMask",
      "pos": [
        756.0200558744679,
        1821.5895696195005
      ],
      "size": {
        "0": 315,
        "1": 82
      },
      "flags": {},
      "order": 123,
      "mode": 0,
      "inputs": [
        {
          "name": "mask",
          "type": "MASK",
          "link": 651
        }
      ],
      "outputs": [
        {
          "name": "MASK",
          "type": "MASK",
          "links": [
            652
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "ImpactGaussianBlurMask"
      },
      "widgets_values": [
        40,
        16.7
      ]
    },
    {
      "id": 230,
      "type": "PreviewImage",
      "pos": [
        1133.8541857754415,
        1762.0296387254214
      ],
      "size": {
        "0": 210,
        "1": 246
      },
      "flags": {},
      "order": 128,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 653
        }
      ],
      "properties": {
        "Node name for S&R": "PreviewImage"
      }
    },
    {
      "id": 249,
      "type": "Note",
      "pos": [
        1372.8541857754428,
        1766.0296387254214
      ],
      "size": {
        "0": 257.47943115234375,
        "1": 129.5432586669922
      },
      "flags": {},
      "order": 15,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "Mask the details area you wish to retain from the original image in the Preview Bridge node up here, or use the mask from the segment anything nodes\n\nThe mask goes into the Blend Image by mask node in the Blend High Frequency Layers subgroup"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 325,
      "type": "IPAdapterUnifiedLoader",
      "pos": [
        -4158.941392710808,
        1228.7732924028035
      ],
      "size": {
        "0": 315,
        "1": 78
      },
      "flags": {},
      "order": 63,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 976
        },
        {
          "name": "ipadapter",
          "type": "IPADAPTER",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "model",
          "type": "MODEL",
          "links": [
            797
          ],
          "shape": 3,
          "slot_index": 0
        },
        {
          "name": "ipadapter",
          "type": "IPADAPTER",
          "links": [
            798
          ],
          "shape": 3,
          "slot_index": 1
        }
      ],
      "properties": {
        "Node name for S&R": "IPAdapterUnifiedLoader"
      },
      "widgets_values": [
        "PLUS (high strength)"
      ]
    },
    {
      "id": 248,
      "type": "Note",
      "pos": [
        -866.2882729662575,
        2762.673095142656
      ],
      "size": {
        "0": 399.2240295410156,
        "1": 277.6108093261719
      },
      "flags": {},
      "order": 16,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "Thanks to the amazing u/Powered_JJ on Reddit, whom I have to thank for being open to collaborate with me on this, we now have a native Frequency Separation workflow inside of comfyUI.\n\nThis group eliminates the need for either color correcting and blending the detail area, or using Frequency Separation in Photoshop.\nSimply mask the detail area you'd like to keep from the original image, and the relit image will be re-processed with a high frequency layer that is the blended result of the high frequency layer of the original image (for the masked area) and the high frequency layer of the generated image (for the areas that you don't care about having different details). \n\nOnce again, thanks u/Powered_JJ"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 277,
      "type": "Image Blending Mode",
      "pos": [
        211.61260928754274,
        2756.344751228503
      ],
      "size": {
        "0": 210,
        "1": 102
      },
      "flags": {},
      "order": 154,
      "mode": 0,
      "inputs": [
        {
          "name": "image_a",
          "type": "IMAGE",
          "link": 704
        },
        {
          "name": "image_b",
          "type": "IMAGE",
          "link": 705
        }
      ],
      "outputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "links": [
            776,
            780
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "Image Blending Mode"
      },
      "widgets_values": [
        "add",
        1
      ]
    },
    {
      "id": 269,
      "type": "PreviewImage",
      "pos": [
        467.7117270337425,
        2469.673095142656
      ],
      "size": {
        "0": 210,
        "1": 246
      },
      "flags": {},
      "order": 145,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 775
        }
      ],
      "properties": {
        "Node name for S&R": "PreviewImage"
      }
    },
    {
      "id": 315,
      "type": "ControlNetApply",
      "pos": [
        -3490,
        2380
      ],
      "size": {
        "0": 317.4000244140625,
        "1": 98
      },
      "flags": {},
      "order": 90,
      "mode": 0,
      "inputs": [
        {
          "name": "conditioning",
          "type": "CONDITIONING",
          "link": 790
        },
        {
          "name": "control_net",
          "type": "CONTROL_NET",
          "link": 785,
          "slot_index": 1
        },
        {
          "name": "image",
          "type": "IMAGE",
          "link": 789
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "links": [
            791
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "ControlNetApply"
      },
      "widgets_values": [
        0.8
      ]
    },
    {
      "id": 35,
      "type": "MaskToImage",
      "pos": [
        594,
        903
      ],
      "size": {
        "0": 210,
        "1": 26
      },
      "flags": {},
      "order": 73,
      "mode": 0,
      "inputs": [
        {
          "name": "mask",
          "type": "MASK",
          "link": 573
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            221,
            318
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "MaskToImage"
      }
    },
    {
      "id": 19,
      "type": "KSampler",
      "pos": [
        1032,
        389
      ],
      "size": {
        "0": 315,
        "1": 262
      },
      "flags": {},
      "order": 119,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 137,
          "slot_index": 0
        },
        {
          "name": "positive",
          "type": "CONDITIONING",
          "link": 335,
          "slot_index": 1
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "link": 336,
          "slot_index": 2
        },
        {
          "name": "latent_image",
          "type": "LATENT",
          "link": 592
        }
      ],
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "links": [
            77
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "KSampler"
      },
      "widgets_values": [
        100361857014344,
        "fixed",
        40,
        1.5,
        "dpmpp_2m_sde",
        "karras",
        1
      ]
    },
    {
      "id": 194,
      "type": "RemapMaskRange",
      "pos": [
        224,
        963
      ],
      "size": {
        "0": 315,
        "1": 82
      },
      "flags": {},
      "order": 65,
      "mode": 0,
      "inputs": [
        {
          "name": "mask",
          "type": "MASK",
          "link": 572
        }
      ],
      "outputs": [
        {
          "name": "mask",
          "type": "MASK",
          "links": [
            573
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "RemapMaskRange"
      },
      "widgets_values": [
        0,
        0.67
      ]
    },
    {
      "id": 214,
      "type": "ControlNetApply",
      "pos": [
        -3473,
        2021
      ],
      "size": {
        "0": 317.4000244140625,
        "1": 98
      },
      "flags": {},
      "order": 77,
      "mode": 0,
      "inputs": [
        {
          "name": "conditioning",
          "type": "CONDITIONING",
          "link": 616
        },
        {
          "name": "control_net",
          "type": "CONTROL_NET",
          "link": 614,
          "slot_index": 1
        },
        {
          "name": "image",
          "type": "IMAGE",
          "link": 787
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "links": [
            790
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "ControlNetApply"
      },
      "widgets_values": [
        0.5
      ]
    },
    {
      "id": 75,
      "type": "GrowMaskWithBlur",
      "pos": [
        215,
        1087
      ],
      "size": {
        "0": 315,
        "1": 246
      },
      "flags": {},
      "order": 61,
      "mode": 0,
      "inputs": [
        {
          "name": "mask",
          "type": "MASK",
          "link": 916
        }
      ],
      "outputs": [
        {
          "name": "mask",
          "type": "MASK",
          "links": [
            572
          ],
          "shape": 3,
          "slot_index": 0
        },
        {
          "name": "mask_inverted",
          "type": "MASK",
          "links": null,
          "shape": 3
        }
      ],
      "properties": {
        "Node name for S&R": "GrowMaskWithBlur"
      },
      "widgets_values": [
        26,
        0,
        true,
        false,
        35.1,
        1,
        1,
        false
      ]
    },
    {
      "id": 375,
      "type": "GroundingDinoModelLoader (segment anything)",
      "pos": [
        -4690,
        2100
      ],
      "size": {
        "0": 361.20001220703125,
        "1": 58
      },
      "flags": {},
      "order": 17,
      "mode": 0,
      "outputs": [
        {
          "name": "GROUNDING_DINO_MODEL",
          "type": "GROUNDING_DINO_MODEL",
          "links": [
            909
          ],
          "shape": 3
        }
      ],
      "properties": {
        "Node name for S&R": "GroundingDinoModelLoader (segment anything)"
      },
      "widgets_values": [
        "GroundingDINO_SwinT_OGC (694MB)"
      ]
    },
    {
      "id": 374,
      "type": "SAMLoader",
      "pos": [
        -4650,
        1970
      ],
      "size": {
        "0": 315,
        "1": 82
      },
      "flags": {},
      "order": 18,
      "mode": 0,
      "outputs": [
        {
          "name": "SAM_MODEL",
          "type": "SAM_MODEL",
          "links": [
            908
          ],
          "shape": 3
        }
      ],
      "properties": {
        "Node name for S&R": "SAMLoader"
      },
      "widgets_values": [
        "sam_vit_b_01ec64.pth",
        "Prefer GPU"
      ]
    },
    {
      "id": 376,
      "type": "PreviewImage",
      "pos": [
        -4260,
        2272
      ],
      "size": {
        "0": 412.9430847167969,
        "1": 421.8208312988281
      },
      "flags": {},
      "order": 80,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 910
        }
      ],
      "properties": {
        "Node name for S&R": "PreviewImage"
      }
    },
    {
      "id": 378,
      "type": "GrowMaskWithBlur",
      "pos": [
        -4204,
        1965
      ],
      "size": {
        "0": 315,
        "1": 246
      },
      "flags": {},
      "order": 81,
      "mode": 0,
      "inputs": [
        {
          "name": "mask",
          "type": "MASK",
          "link": 913
        }
      ],
      "outputs": [
        {
          "name": "mask",
          "type": "MASK",
          "links": [
            915
          ],
          "shape": 3,
          "slot_index": 0
        },
        {
          "name": "mask_inverted",
          "type": "MASK",
          "links": null,
          "shape": 3
        }
      ],
      "properties": {
        "Node name for S&R": "GrowMaskWithBlur"
      },
      "widgets_values": [
        26,
        1.7000000000000002,
        true,
        false,
        1.8,
        1,
        1,
        false
      ]
    },
    {
      "id": 326,
      "type": "LoadImage",
      "pos": [
        -4519,
        1238
      ],
      "size": {
        "0": 315,
        "1": 314.0000305175781
      },
      "flags": {},
      "order": 19,
      "mode": 0,
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            799
          ],
          "shape": 3
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": null,
          "shape": 3
        }
      ],
      "properties": {
        "Node name for S&R": "LoadImage"
      },
      "widgets_values": [
        "ice_pattern (2).jpg",
        "image"
      ]
    },
    {
      "id": 156,
      "type": "LoadImage",
      "pos": [
        -900,
        450
      ],
      "size": {
        "0": 315,
        "1": 314.0000305175781
      },
      "flags": {},
      "order": 20,
      "mode": 0,
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [],
          "shape": 3,
          "slot_index": 0
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": [],
          "shape": 3,
          "slot_index": 1
        }
      ],
      "properties": {
        "Node name for S&R": "LoadImage"
      },
      "widgets_values": [
        "render-2 (2).png",
        "image"
      ]
    },
    {
      "id": 5,
      "type": "CLIPTextEncode",
      "pos": [
        -90,
        560
      ],
      "size": {
        "0": 403.01458740234375,
        "1": 157.02496337890625
      },
      "flags": {},
      "order": 59,
      "mode": 0,
      "inputs": [
        {
          "name": "clip",
          "type": "CLIP",
          "link": 982
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "links": [
            540
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "CLIPTextEncode"
      },
      "widgets_values": [
        "warm, cold"
      ],
      "color": "#322",
      "bgcolor": "#533"
    },
    {
      "id": 392,
      "type": "MaskComposite",
      "pos": [
        -1863,
        2130
      ],
      "size": {
        "0": 315,
        "1": 126
      },
      "flags": {},
      "order": 82,
      "mode": 0,
      "inputs": [
        {
          "name": "destination",
          "type": "MASK",
          "link": 933
        },
        {
          "name": "source",
          "type": "MASK",
          "link": 934
        }
      ],
      "outputs": [
        {
          "name": "MASK",
          "type": "MASK",
          "links": [
            935
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "MaskComposite"
      },
      "widgets_values": [
        0,
        0,
        "add"
      ]
    },
    {
      "id": 393,
      "type": "MaskToImage",
      "pos": [
        -1749,
        2305
      ],
      "size": {
        "0": 188.6634979248047,
        "1": 41.73971176147461
      },
      "flags": {},
      "order": 92,
      "mode": 0,
      "inputs": [
        {
          "name": "mask",
          "type": "MASK",
          "link": 935
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            936
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "MaskToImage"
      }
    },
    {
      "id": 394,
      "type": "PreviewImage",
      "pos": [
        -1523,
        2128
      ],
      "size": {
        "0": 210,
        "1": 246
      },
      "flags": {},
      "order": 100,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 936
        }
      ],
      "properties": {
        "Node name for S&R": "PreviewImage"
      }
    },
    {
      "id": 395,
      "type": "Note",
      "pos": [
        -1279,
        2134
      ],
      "size": {
        "0": 244.97747802734375,
        "1": 221.39271545410156
      },
      "flags": {},
      "order": 21,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "This group is for those of you who need multiple SAM in their life in order to make things work.\n\nNot judging. Just plug in two SAM masks here, and create more MaskComposites to add even more SAMs.\nThen use the composited mask however you want, like for keeping colors and / or details over multiple subjects."
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 207,
      "type": "PreviewImage",
      "pos": [
        -1921,
        1431
      ],
      "size": {
        "0": 482.60498046875,
        "1": 560.2639770507812
      },
      "flags": {},
      "order": 74,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 603
        }
      ],
      "properties": {
        "Node name for S&R": "PreviewImage"
      }
    },
    {
      "id": 206,
      "type": "GroundingDinoModelLoader (segment anything)",
      "pos": [
        -1882,
        1312
      ],
      "size": {
        "0": 361.20001220703125,
        "1": 58
      },
      "flags": {},
      "order": 22,
      "mode": 0,
      "outputs": [
        {
          "name": "GROUNDING_DINO_MODEL",
          "type": "GROUNDING_DINO_MODEL",
          "links": [
            601
          ],
          "shape": 3
        }
      ],
      "properties": {
        "Node name for S&R": "GroundingDinoModelLoader (segment anything)"
      },
      "widgets_values": [
        "GroundingDINO_SwinT_OGC (694MB)"
      ]
    },
    {
      "id": 205,
      "type": "SAMLoader",
      "pos": [
        -1876,
        1189
      ],
      "size": {
        "0": 315,
        "1": 82
      },
      "flags": {},
      "order": 23,
      "mode": 0,
      "outputs": [
        {
          "name": "SAM_MODEL",
          "type": "SAM_MODEL",
          "links": [
            600
          ],
          "shape": 3
        }
      ],
      "properties": {
        "Node name for S&R": "SAMLoader"
      },
      "widgets_values": [
        "sam_vit_b_01ec64.pth",
        "Prefer GPU"
      ]
    },
    {
      "id": 219,
      "type": "MaskToImage",
      "pos": [
        -1382,
        1383
      ],
      "size": {
        "0": 210,
        "1": 26
      },
      "flags": {},
      "order": 75,
      "mode": 0,
      "inputs": [
        {
          "name": "mask",
          "type": "MASK",
          "link": 784
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            623
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "MaskToImage"
      }
    },
    {
      "id": 245,
      "type": "Note",
      "pos": [
        -1388,
        1462
      ],
      "size": {
        "0": 268.28192138671875,
        "1": 102.73438262939453
      },
      "flags": {},
      "order": 24,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "This Group segments the original object from the background. \nChange the prompt in the GroundingDinoSAMSegment node to the appropriate description of the object"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 396,
      "type": "Note",
      "pos": [
        -4687,
        2428
      ],
      "size": {
        "0": 351.2225036621094,
        "1": 137.66908264160156
      },
      "flags": {},
      "order": 25,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "Fun Group to create attention masks for the IPAdapter group, so that only one thing gets affected by it.\n\nIn my example, I turned a prop wooden branch into wool, while keeping everything else unaffected by the IPAdapter group."
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 373,
      "type": "GroundingDinoSAMSegment (segment anything)",
      "pos": [
        -4690,
        2210
      ],
      "size": {
        "0": 352.79998779296875,
        "1": 133.25344848632812
      },
      "flags": {},
      "order": 70,
      "mode": 0,
      "inputs": [
        {
          "name": "sam_model",
          "type": "SAM_MODEL",
          "link": 908,
          "slot_index": 0
        },
        {
          "name": "grounding_dino_model",
          "type": "GROUNDING_DINO_MODEL",
          "link": 909,
          "slot_index": 1
        },
        {
          "name": "image",
          "type": "IMAGE",
          "link": 912
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            910
          ],
          "shape": 3,
          "slot_index": 0
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": [
            913,
            934
          ],
          "shape": 3,
          "slot_index": 1
        }
      ],
      "properties": {
        "Node name for S&R": "GroundingDinoSAMSegment (segment anything)"
      },
      "widgets_values": [
        "wood",
        0.65
      ]
    },
    {
      "id": 397,
      "type": "Note",
      "pos": [
        -4529,
        1627
      ],
      "size": {
        "0": 351.2225036621094,
        "1": 137.66908264160156
      },
      "flags": {},
      "order": 26,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "IPAdapter group to either act on the whole image with a reference image, or act on just one part of the image by using an attention mask created by a SAM."
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 244,
      "type": "Note",
      "pos": [
        -3056,
        1966
      ],
      "size": {
        "0": 309.9846496582031,
        "1": 102.63199615478516
      },
      "flags": {},
      "order": 27,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "This Group generates a new background, while maintaining the object coordinates in the same position through the Depth ControlNet.\nThe original object is then merged on top of this layer in the next group"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 322,
      "type": "Note",
      "pos": [
        -870.2882729662575,
        2127.673095142656
      ],
      "size": {
        "0": 245.93186950683594,
        "1": 151.14096069335938
      },
      "flags": {},
      "order": 28,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "Mask the details area you wish to retain from the original image in the Preview Bridge node from the relight group, or use the mask from the segment anything nodes\n\nThe mask goes into the Blend Image by mask node in the Blend High Frequency Layers subgroup"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 321,
      "type": "GrowMask",
      "pos": [
        -815.2882729662575,
        1920.673095142655
      ],
      "size": {
        "0": 315,
        "1": 82
      },
      "flags": {},
      "order": 87,
      "mode": 0,
      "inputs": [
        {
          "name": "mask",
          "type": "MASK",
          "link": 795
        }
      ],
      "outputs": [
        {
          "name": "MASK",
          "type": "MASK",
          "links": [
            796
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "GrowMask"
      },
      "widgets_values": [
        -10,
        true
      ]
    },
    {
      "id": 365,
      "type": "PreviewImage",
      "pos": [
        -584.2882729662574,
        2142.673095142656
      ],
      "size": {
        "0": 194.69790649414062,
        "1": 246
      },
      "flags": {},
      "order": 103,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 873
        }
      ],
      "properties": {
        "Node name for S&R": "PreviewImage"
      }
    },
    {
      "id": 204,
      "type": "GroundingDinoSAMSegment (segment anything)",
      "pos": [
        -1471,
        1211
      ],
      "size": {
        "0": 352.79998779296875,
        "1": 122
      },
      "flags": {},
      "order": 66,
      "mode": 0,
      "inputs": [
        {
          "name": "sam_model",
          "type": "SAM_MODEL",
          "link": 600,
          "slot_index": 0
        },
        {
          "name": "grounding_dino_model",
          "type": "GROUNDING_DINO_MODEL",
          "link": 601,
          "slot_index": 1
        },
        {
          "name": "image",
          "type": "IMAGE",
          "link": 694
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            603,
            620
          ],
          "shape": 3,
          "slot_index": 0
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": [
            784,
            792,
            933
          ],
          "shape": 3,
          "slot_index": 1
        }
      ],
      "properties": {
        "Node name for S&R": "GroundingDinoSAMSegment (segment anything)"
      },
      "widgets_values": [
        "bottle",
        0.3
      ]
    },
    {
      "id": 220,
      "type": "PreviewBridge",
      "pos": [
        -1637.4182238381368,
        2524.308836345719
      ],
      "size": {
        "0": 484.1872253417969,
        "1": 523.1453247070312
      },
      "flags": {},
      "order": 113,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 624
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            804,
            898
          ],
          "shape": 3,
          "slot_index": 0
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": [],
          "shape": 3,
          "slot_index": 1
        }
      ],
      "properties": {
        "Node name for S&R": "PreviewBridge"
      },
      "widgets_values": [
        "$220-0"
      ]
    },
    {
      "id": 195,
      "type": "Note",
      "pos": [
        -2769,
        635
      ],
      "size": {
        "0": 306.9599609375,
        "1": 143.20050048828125
      },
      "flags": {},
      "order": 29,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "This Group generates a product shot.\nConnect the resulting generated product image to the depth anything node and to the groundingdinoSAMsegment node."
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 416,
      "type": "Note",
      "pos": [
        -3280,
        706
      ],
      "size": {
        "0": 309.9846496582031,
        "1": 102.63199615478516
      },
      "flags": {},
      "order": 30,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "Model Group.\nRemember, SD1.5 only.\n\nSomeone asked for PAG as well, so there you go. Disabled by default, remember to set the CFG accordingly, since PAG affects CFG values."
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 324,
      "type": "IPAdapterAdvanced",
      "pos": [
        -4144.243282433719,
        1383.0738393522745
      ],
      "size": {
        "0": 315,
        "1": 278
      },
      "flags": {},
      "order": 91,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 797
        },
        {
          "name": "ipadapter",
          "type": "IPADAPTER",
          "link": 798
        },
        {
          "name": "image",
          "type": "IMAGE",
          "link": 799,
          "slot_index": 2
        },
        {
          "name": "image_negative",
          "type": "IMAGE",
          "link": null
        },
        {
          "name": "attn_mask",
          "type": "MASK",
          "link": 915
        },
        {
          "name": "clip_vision",
          "type": "CLIP_VISION",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": [
            801,
            980
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "IPAdapterAdvanced"
      },
      "widgets_values": [
        0.6,
        "linear",
        "concat",
        0,
        1,
        "K+V w/ C penalty"
      ]
    },
    {
      "id": 53,
      "type": "ImageResize+",
      "pos": [
        -512,
        442
      ],
      "size": {
        "0": 315,
        "1": 218
      },
      "flags": {},
      "order": 115,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 898
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            482,
            670
          ],
          "shape": 3,
          "slot_index": 0
        },
        {
          "name": "width",
          "type": "INT",
          "links": [],
          "shape": 3,
          "slot_index": 1
        },
        {
          "name": "height",
          "type": "INT",
          "links": [],
          "shape": 3,
          "slot_index": 2
        }
      ],
      "properties": {
        "Node name for S&R": "ImageResize+"
      },
      "widgets_values": [
        1920,
        1080,
        "lanczos",
        false,
        "always",
        0
      ]
    },
    {
      "id": 203,
      "type": "Note",
      "pos": [
        -502,
        318
      ],
      "size": {
        "0": 306.7802734375,
        "1": 58
      },
      "flags": {},
      "order": 31,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "Resize at will"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 419,
      "type": "SUPIR_first_stage",
      "pos": [
        2448.5852737407613,
        691.8165674138409
      ],
      "size": {
        "0": 248.86013793945312,
        "1": 170
      },
      "flags": {},
      "order": 124,
      "mode": 4,
      "inputs": [
        {
          "name": "SUPIR_VAE",
          "type": "SUPIRVAE",
          "link": 985,
          "slot_index": 0
        },
        {
          "name": "image",
          "type": "IMAGE",
          "link": 986
        }
      ],
      "outputs": [
        {
          "name": "SUPIR_VAE",
          "type": "SUPIRVAE",
          "links": [
            995
          ],
          "shape": 3,
          "slot_index": 0
        },
        {
          "name": "denoised_image",
          "type": "IMAGE",
          "links": [
            996
          ],
          "shape": 3,
          "slot_index": 1
        },
        {
          "name": "denoised_latents",
          "type": "LATENT",
          "links": [
            992
          ],
          "shape": 3,
          "slot_index": 2
        }
      ],
      "properties": {
        "Node name for S&R": "SUPIR_first_stage"
      },
      "widgets_values": [
        true,
        512,
        512,
        "auto"
      ]
    },
    {
      "id": 420,
      "type": "SUPIR_sample",
      "pos": [
        2978.5852737407613,
        411.81656741384137
      ],
      "size": {
        "0": 315,
        "1": 454
      },
      "flags": {},
      "order": 129,
      "mode": 4,
      "inputs": [
        {
          "name": "SUPIR_model",
          "type": "SUPIRMODEL",
          "link": 987,
          "slot_index": 0
        },
        {
          "name": "latents",
          "type": "LATENT",
          "link": 988
        },
        {
          "name": "positive",
          "type": "SUPIR_cond_pos",
          "link": 989,
          "slot_index": 2
        },
        {
          "name": "negative",
          "type": "SUPIR_cond_neg",
          "link": 990
        }
      ],
      "outputs": [
        {
          "name": "latent",
          "type": "LATENT",
          "links": [
            994
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "SUPIR_sample"
      },
      "widgets_values": [
        174277455657960,
        "fixed",
        10,
        2,
        1.5,
        5,
        1.0030000000000001,
        1,
        1,
        0.9,
        0.5,
        false,
        "RestoreDPMPP2MSampler",
        1024,
        512
      ]
    },
    {
      "id": 421,
      "type": "SUPIR_conditioner",
      "pos": [
        2528.5852737407613,
        431.8165674138406
      ],
      "size": {
        "0": 401.7200012207031,
        "1": 200.86000061035156
      },
      "flags": {},
      "order": 127,
      "mode": 4,
      "inputs": [
        {
          "name": "SUPIR_model",
          "type": "SUPIRMODEL",
          "link": 991,
          "slot_index": 0
        },
        {
          "name": "latents",
          "type": "LATENT",
          "link": 992,
          "slot_index": 1
        },
        {
          "name": "captions",
          "type": "STRING",
          "link": null,
          "widget": {
            "name": "captions"
          }
        }
      ],
      "outputs": [
        {
          "name": "positive",
          "type": "SUPIR_cond_pos",
          "links": [
            989
          ],
          "shape": 3
        },
        {
          "name": "negative",
          "type": "SUPIR_cond_neg",
          "links": [
            990
          ],
          "shape": 3,
          "slot_index": 1
        }
      ],
      "properties": {
        "Node name for S&R": "SUPIR_conditioner"
      },
      "widgets_values": [
        "high quality, detailed, photograph",
        "bad quality, blurry, messy",
        ""
      ]
    },
    {
      "id": 422,
      "type": "SUPIR_decode",
      "pos": [
        3338.5852737407613,
        421.8165674138408
      ],
      "size": {
        "0": 258.0101318359375,
        "1": 102
      },
      "flags": {},
      "order": 130,
      "mode": 4,
      "inputs": [
        {
          "name": "SUPIR_VAE",
          "type": "SUPIRVAE",
          "link": 993,
          "slot_index": 0
        },
        {
          "name": "latents",
          "type": "LATENT",
          "link": 994
        }
      ],
      "outputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "links": [
            998
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "SUPIR_decode"
      },
      "widgets_values": [
        true,
        512
      ]
    },
    {
      "id": 423,
      "type": "SUPIR_encode",
      "pos": [
        2728.5852737407613,
        731.8165674138409
      ],
      "size": {
        "0": 217.8501434326172,
        "1": 126
      },
      "flags": {},
      "order": 126,
      "mode": 4,
      "inputs": [
        {
          "name": "SUPIR_VAE",
          "type": "SUPIRVAE",
          "link": 995
        },
        {
          "name": "image",
          "type": "IMAGE",
          "link": 996
        }
      ],
      "outputs": [
        {
          "name": "latent",
          "type": "LATENT",
          "links": [
            988
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "SUPIR_encode"
      },
      "widgets_values": [
        true,
        512,
        "auto"
      ]
    },
    {
      "id": 425,
      "type": "Image Comparer (rgthree)",
      "pos": {
        "0": 2728.586669921875,
        "1": 941.816650390625,
        "2": 0,
        "3": 0,
        "4": 0,
        "5": 0,
        "6": 0,
        "7": 0,
        "8": 0,
        "9": 0
      },
      "size": {
        "0": 570,
        "1": 500
      },
      "flags": {},
      "order": 133,
      "mode": 4,
      "inputs": [
        {
          "name": "image_a",
          "type": "IMAGE",
          "link": 1007,
          "dir": 3
        },
        {
          "name": "image_b",
          "type": "IMAGE",
          "link": 999,
          "dir": 3
        }
      ],
      "outputs": [],
      "properties": {
        "comparer_mode": "Slide"
      },
      "widgets_values": [
        [
          "/view?filename=rgthree.compare._temp_oifei_00001_.png&type=temp&subfolder=&rand=0.34662974920834566",
          "/view?filename=rgthree.compare._temp_oifei_00002_.png&type=temp&subfolder=&rand=0.7044489046233384"
        ]
      ]
    },
    {
      "id": 426,
      "type": "SUPIR_model_loader_v2",
      "pos": [
        1998.5852737407617,
        521.8165674138407
      ],
      "size": {
        "0": 412.73406982421875,
        "1": 170
      },
      "flags": {},
      "order": 52,
      "mode": 4,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 1000,
          "slot_index": 0
        },
        {
          "name": "clip",
          "type": "CLIP",
          "link": 1001
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": 1002
        }
      ],
      "outputs": [
        {
          "name": "SUPIR_model",
          "type": "SUPIRMODEL",
          "links": [
            987,
            991
          ],
          "shape": 3,
          "slot_index": 0
        },
        {
          "name": "SUPIR_VAE",
          "type": "SUPIRVAE",
          "links": [
            985,
            993
          ],
          "shape": 3,
          "slot_index": 1
        }
      ],
      "properties": {
        "Node name for S&R": "SUPIR_model_loader_v2"
      },
      "widgets_values": [
        "SUPIR-v0Q_fp16.safetensors",
        false,
        "auto"
      ]
    },
    {
      "id": 427,
      "type": "CheckpointLoaderSimple",
      "pos": [
        1948.5852737407617,
        351.8165674138417
      ],
      "size": {
        "0": 529.3912963867188,
        "1": 98
      },
      "flags": {},
      "order": 32,
      "mode": 4,
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": [
            1000
          ],
          "shape": 3
        },
        {
          "name": "CLIP",
          "type": "CLIP",
          "links": [
            1001
          ],
          "shape": 3,
          "slot_index": 1
        },
        {
          "name": "VAE",
          "type": "VAE",
          "links": [
            1002
          ],
          "shape": 3,
          "slot_index": 2
        }
      ],
      "properties": {
        "Node name for S&R": "CheckpointLoaderSimple"
      },
      "widgets_values": [
        "juggernautXL_v9Rdphoto2Lightning.safetensors"
      ]
    },
    {
      "id": 258,
      "type": "SplitImageWithAlpha",
      "pos": [
        -230.28827296625744,
        1767.673095142655
      ],
      "size": {
        "0": 185.10531616210938,
        "1": 46
      },
      "flags": {},
      "order": 83,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 1006
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            677,
            678
          ],
          "shape": 3,
          "slot_index": 0
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": null,
          "shape": 3
        }
      ],
      "properties": {
        "Node name for S&R": "SplitImageWithAlpha"
      }
    },
    {
      "id": 313,
      "type": "Note",
      "pos": [
        1332,
        1419
      ],
      "size": {
        "0": 251.81761169433594,
        "1": 88.38092803955078
      },
      "flags": {},
      "order": 33,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "Relit image, with non-finetuned details"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 320,
      "type": "MaskToImage",
      "pos": [
        -745.2882729662575,
        2048.673095142655
      ],
      "size": {
        "0": 183.5380859375,
        "1": 26
      },
      "flags": {},
      "order": 95,
      "mode": 0,
      "inputs": [
        {
          "name": "mask",
          "type": "MASK",
          "link": 796
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            873,
            1013
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "MaskToImage"
      }
    },
    {
      "id": 428,
      "type": "JWImageResizeByFactor",
      "pos": [
        2112,
        764
      ],
      "size": {
        "0": 315,
        "1": 82
      },
      "flags": {},
      "order": 122,
      "mode": 4,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 1003
        },
        {
          "name": "factor",
          "type": "FLOAT",
          "link": 1019,
          "widget": {
            "name": "factor"
          },
          "slot_index": 1
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            986,
            997
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "JWImageResizeByFactor"
      },
      "widgets_values": [
        1.5,
        "bicubic"
      ]
    },
    {
      "id": 212,
      "type": "PreviewBridge",
      "pos": [
        -2683,
        1248
      ],
      "size": {
        "0": 537.45556640625,
        "1": 534.1554565429688
      },
      "flags": {},
      "order": 109,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 612
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            619
          ],
          "shape": 3,
          "slot_index": 0
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": [],
          "shape": 3,
          "slot_index": 1
        }
      ],
      "properties": {
        "Node name for S&R": "PreviewBridge"
      },
      "widgets_values": [
        "$212-0"
      ]
    },
    {
      "id": 253,
      "type": "Note",
      "pos": [
        -4142,
        824
      ],
      "size": {
        "0": 309.9846496582031,
        "1": 102.63199615478516
      },
      "flags": {},
      "order": 34,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "Place starting product photo you already have here, and connect it to:\n- depth anything node in the background generator group;\n- SAM group"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 82,
      "type": "CheckpointLoaderSimple",
      "pos": [
        -3285,
        326
      ],
      "size": {
        "0": 315,
        "1": 98
      },
      "flags": {},
      "order": 35,
      "mode": 0,
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": [
            548,
            975
          ],
          "shape": 3,
          "slot_index": 0
        },
        {
          "name": "CLIP",
          "type": "CLIP",
          "links": [
            339,
            340,
            604,
            605,
            981,
            982
          ],
          "shape": 3,
          "slot_index": 1
        },
        {
          "name": "VAE",
          "type": "VAE",
          "links": [
            355,
            611,
            813,
            983
          ],
          "shape": 3,
          "slot_index": 2
        }
      ],
      "properties": {
        "Node name for S&R": "CheckpointLoaderSimple"
      },
      "widgets_values": [
        "epicrealism_naturalSinRC1VAE.safetensors"
      ]
    },
    {
      "id": 250,
      "type": "Note",
      "pos": [
        1212.711727033742,
        2925.673095142656
      ],
      "size": {
        "0": 251.81761169433594,
        "1": 88.38092803955078
      },
      "flags": {},
      "order": 36,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "Blended image with finer details from the original image and new lighting from the generated image"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 274,
      "type": "Image Blending Mode",
      "pos": [
        203.71172703374268,
        2480.673095142656
      ],
      "size": {
        "0": 221.88836669921875,
        "1": 102
      },
      "flags": {},
      "order": 144,
      "mode": 0,
      "inputs": [
        {
          "name": "image_a",
          "type": "IMAGE",
          "link": 700
        },
        {
          "name": "image_b",
          "type": "IMAGE",
          "link": 701
        }
      ],
      "outputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "links": [
            703
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "Image Blending Mode"
      },
      "widgets_values": [
        "add",
        0.5
      ]
    },
    {
      "id": 331,
      "type": "PreviewImage",
      "pos": [
        2359,
        2414
      ],
      "size": {
        "0": 917.359130859375,
        "1": 850.51708984375
      },
      "flags": {},
      "order": 172,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 1124
        }
      ],
      "properties": {
        "Node name for S&R": "PreviewImage"
      }
    },
    {
      "id": 260,
      "type": "ImageGaussianBlur",
      "pos": [
        -230.28827296625744,
        1887.673095142655
      ],
      "size": {
        "0": 210,
        "1": 58
      },
      "flags": {},
      "order": 94,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 678
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            680,
            683,
            771
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "ImageGaussianBlur"
      },
      "widgets_values": [
        50
      ]
    },
    {
      "id": 308,
      "type": "Image Levels Adjustment",
      "pos": [
        1115.711727033742,
        2390.673095142656
      ],
      "size": {
        "0": 315,
        "1": 106
      },
      "flags": {},
      "order": 167,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 870
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            767
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "Image Levels Adjustment"
      },
      "widgets_values": [
        81.7,
        1,
        180.8
      ]
    },
    {
      "id": 307,
      "type": "Image Blending Mode",
      "pos": [
        1108.711727033742,
        2224.673095142656
      ],
      "size": {
        "0": 315,
        "1": 102
      },
      "flags": {},
      "order": 162,
      "mode": 0,
      "inputs": [
        {
          "name": "image_a",
          "type": "IMAGE",
          "link": 869,
          "slot_index": 0
        },
        {
          "name": "image_b",
          "type": "IMAGE",
          "link": 868
        }
      ],
      "outputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "links": [
            870
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "Image Blending Mode"
      },
      "widgets_values": [
        "add",
        0.65
      ]
    },
    {
      "id": 273,
      "type": "ImageGaussianBlur",
      "pos": [
        -192.28827296625744,
        2596.673095142656
      ],
      "size": {
        "0": 210,
        "1": 58
      },
      "flags": {},
      "order": 140,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 699
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            701,
            704,
            775,
            869
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "ImageGaussianBlur"
      },
      "widgets_values": [
        70
      ]
    },
    {
      "id": 263,
      "type": "ImageInvert",
      "pos": [
        200.71172703374268,
        1966.673095142655
      ],
      "size": {
        "0": 140,
        "1": 26
      },
      "flags": {},
      "order": 108,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 682
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            684
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "ImageInvert"
      }
    },
    {
      "id": 264,
      "type": "Image Blending Mode",
      "pos": [
        162.71172703374268,
        2055.6730951426553
      ],
      "size": {
        "0": 210,
        "1": 102
      },
      "flags": {},
      "order": 110,
      "mode": 0,
      "inputs": [
        {
          "name": "image_a",
          "type": "IMAGE",
          "link": 683
        },
        {
          "name": "image_b",
          "type": "IMAGE",
          "link": 684
        }
      ],
      "outputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "links": [
            772,
            773
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "Image Blending Mode"
      },
      "widgets_values": [
        "add",
        1
      ]
    },
    {
      "id": 225,
      "type": "PreviewBridge",
      "pos": [
        1035,
        705
      ],
      "size": {
        "0": 558.9418334960938,
        "1": 655.6810913085938
      },
      "flags": {},
      "order": 121,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 642
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            1003,
            1007
          ],
          "shape": 3,
          "slot_index": 0
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": [
            651
          ],
          "shape": 3,
          "slot_index": 1
        }
      ],
      "properties": {
        "Node name for S&R": "PreviewBridge"
      },
      "widgets_values": [
        "$225-0"
      ]
    },
    {
      "id": 469,
      "type": "SplitImageWithAlpha",
      "pos": [
        3090,
        1760
      ],
      "size": {
        "0": 185.10531616210938,
        "1": 46
      },
      "flags": {},
      "order": 147,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 1107
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            1102
          ],
          "shape": 3,
          "slot_index": 0
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": null,
          "shape": 3
        }
      ],
      "properties": {
        "Node name for S&R": "SplitImageWithAlpha"
      }
    },
    {
      "id": 470,
      "type": "ImageGaussianBlur",
      "pos": [
        3090,
        1850
      ],
      "size": {
        "0": 210,
        "1": 58
      },
      "flags": {},
      "order": 151,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 1102
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            1101,
            1113
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "ImageGaussianBlur"
      },
      "widgets_values": [
        50
      ]
    },
    {
      "id": 475,
      "type": "Image Levels Adjustment",
      "pos": [
        2720,
        2180
      ],
      "size": {
        "0": 315,
        "1": 106
      },
      "flags": {},
      "order": 168,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 1115
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            1124
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "Image Levels Adjustment"
      },
      "widgets_values": [
        81.7,
        1,
        180.8
      ]
    },
    {
      "id": 319,
      "type": "ImpactGaussianBlurMask",
      "pos": [
        -813.2882729662575,
        1776.673095142655
      ],
      "size": {
        "0": 315,
        "1": 82
      },
      "flags": {},
      "order": 76,
      "mode": 0,
      "inputs": [
        {
          "name": "mask",
          "type": "MASK",
          "link": 792
        }
      ],
      "outputs": [
        {
          "name": "MASK",
          "type": "MASK",
          "links": [
            795,
            1036,
            1128
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "ImpactGaussianBlurMask"
      },
      "widgets_values": [
        87,
        16.7
      ]
    },
    {
      "id": 477,
      "type": "MaskToImage",
      "pos": [
        2380,
        1930
      ],
      "size": {
        "0": 210,
        "1": 26
      },
      "flags": {},
      "order": 97,
      "mode": 0,
      "inputs": [
        {
          "name": "mask",
          "type": "MASK",
          "link": 1125
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            1126
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "MaskToImage"
      }
    },
    {
      "id": 476,
      "type": "GrowMask",
      "pos": [
        2318,
        1785
      ],
      "size": {
        "0": 315,
        "1": 82
      },
      "flags": {},
      "order": 89,
      "mode": 0,
      "inputs": [
        {
          "name": "mask",
          "type": "MASK",
          "link": 1128
        }
      ],
      "outputs": [
        {
          "name": "MASK",
          "type": "MASK",
          "links": [
            1125
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "GrowMask"
      },
      "widgets_values": [
        -21,
        true
      ]
    },
    {
      "id": 398,
      "type": "Note",
      "pos": [
        2280,
        3346
      ],
      "size": {
        "0": 639.9686889648438,
        "1": 106.79023742675781
      },
      "flags": {},
      "order": 37,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "Option 1 for color matching the subject and preserving its original color, the number 1 complaint y'all had.\n\nIt uses a reduced mask from SAM to blend the original color with the generated scene using a ColorMatch node. Fix the blending value however much you like, personally in my photography works I never go full original color because it makes no sense - but you do you."
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 404,
      "type": "Note",
      "pos": [
        3519.0523777777753,
        3341.479050434003
      ],
      "size": {
        "0": 643.3150634765625,
        "1": 122.4622573852539
      },
      "flags": {},
      "order": 38,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "Option 2 for color matching the subject and preserving its original color, the number 1 complaint y'all had.\n\nIt uses a reduced mask from SAM to blend the original color with the generated scene using a Image Blending Mode node set on Hue. Fix the blending value however much you like, personally in my photography works I never go full original color because it makes no sense - but you do you.\nUnfortunately Hue retains some of the original lighting information, so an effective 100% blending turns back the lighting to the original image.\n"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 323,
      "type": "Note",
      "pos": [
        733.7117270337422,
        2561.673095142656
      ],
      "size": {
        "0": 210,
        "1": 134.56146240234375
      },
      "flags": {},
      "order": 39,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "Mask (either from SAM's convert mask to image or from the above Convert Mask to Image node descending from the preview bridge node of the relight group) goes here"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 488,
      "type": "Note",
      "pos": [
        2317,
        2132
      ],
      "size": {
        "0": 336.4303283691406,
        "1": 145.63107299804688
      },
      "flags": {},
      "order": 40,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "This Group recalculates the Low Frequency Layer much in the same way we're doing for the High Frequency Layer, by Color Matching the whole relit image with the Original Image as reference, and then masking with SAM to recolor only the subject.\n\nIt then regenerates a new blended low frequency layer."
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 424,
      "type": "ColorMatch",
      "pos": [
        3638.5852737407613,
        431.8165674138406
      ],
      "size": {
        "0": 315,
        "1": 78
      },
      "flags": {},
      "order": 131,
      "mode": 4,
      "inputs": [
        {
          "name": "image_ref",
          "type": "IMAGE",
          "link": 997,
          "slot_index": 0
        },
        {
          "name": "image_target",
          "type": "IMAGE",
          "link": 998
        }
      ],
      "outputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "links": [
            984,
            999,
            1004,
            1140,
            1142,
            1145,
            1147,
            1176,
            1197,
            1201
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "ColorMatch"
      },
      "widgets_values": [
        "mkl"
      ]
    },
    {
      "id": 532,
      "type": "SplitImageWithAlpha",
      "pos": [
        5582.518439387208,
        1798.2411465173338
      ],
      "size": {
        "0": 185.10531616210938,
        "1": 46
      },
      "flags": {},
      "order": 157,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 1199
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            1200
          ],
          "shape": 3,
          "slot_index": 0
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": null,
          "shape": 3
        }
      ],
      "properties": {
        "Node name for S&R": "SplitImageWithAlpha"
      }
    },
    {
      "id": 533,
      "type": "ImageGaussianBlur",
      "pos": [
        5582.518439387208,
        1888.2411465173338
      ],
      "size": {
        "0": 210,
        "1": 58
      },
      "flags": {},
      "order": 160,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 1200
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            1198,
            1204
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "ImageGaussianBlur"
      },
      "widgets_values": [
        50
      ]
    },
    {
      "id": 534,
      "type": "Image Blend by Mask",
      "pos": [
        5212.518439387208,
        1918.2411465173338
      ],
      "size": {
        "0": 315,
        "1": 98
      },
      "flags": {},
      "order": 152,
      "mode": 0,
      "inputs": [
        {
          "name": "image_a",
          "type": "IMAGE",
          "link": 1201
        },
        {
          "name": "image_b",
          "type": "IMAGE",
          "link": 1202
        },
        {
          "name": "mask",
          "type": "IMAGE",
          "link": 1210
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            1199
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "Image Blend by Mask"
      },
      "widgets_values": [
        0.74
      ]
    },
    {
      "id": 536,
      "type": "Image Levels Adjustment",
      "pos": [
        5212.518439387208,
        2218.2411465173295
      ],
      "size": {
        "0": 315,
        "1": 106
      },
      "flags": {},
      "order": 170,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 1206
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            1195
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "Image Levels Adjustment"
      },
      "widgets_values": [
        81.7,
        1,
        180.8
      ]
    },
    {
      "id": 528,
      "type": "PreviewImage",
      "pos": [
        4852.518439387208,
        2418.2411465173304
      ],
      "size": {
        "0": 917.359130859375,
        "1": 850.51708984375
      },
      "flags": {},
      "order": 174,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 1195
        }
      ],
      "properties": {
        "Node name for S&R": "PreviewImage"
      }
    },
    {
      "id": 418,
      "type": "PreviewImage",
      "pos": [
        3326,
        577
      ],
      "size": {
        "0": 755.3493041992188,
        "1": 624.40380859375
      },
      "flags": {},
      "order": 132,
      "mode": 4,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 984
        }
      ],
      "properties": {
        "Node name for S&R": "PreviewImage"
      }
    },
    {
      "id": 430,
      "type": "Note",
      "pos": [
        1789,
        1327
      ],
      "size": {
        "0": 518.9575805664062,
        "1": 163.7966766357422
      },
      "flags": {},
      "order": 41,
      "mode": 4,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "Quick and dirty SUPIR upscale to 1.2x (it's faster in testing than 2x).\nYou can swap this for any upscaler you like the most, as long as you understand what's going on.\n\nIMPORTANT: the original image and the SAM mask(s) MUST be resized to the same factor, otherwise the frequency separation technique won't work. I converted the factor to an input to help with that.\n\nMORE IMPORTANT: upscaling the high frequency layer from the original image is not great. Starting from a higher resolution original image and using that as source would be better, but I can't implement it as a one-click solution."
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 539,
      "type": "Note",
      "pos": [
        4817,
        2215
      ],
      "size": {
        "0": 332.042724609375,
        "1": 111.3852310180664
      },
      "flags": {},
      "order": 42,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "This Group recalculates the Low Frequency Layer much in the same way we're doing for the High Frequency Layer, by Color Matching the whole relit image with the Original Image as reference, and then masking with SAM to recolor only the subject.\n\nIt then regenerates a new blended low frequency layer."
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 515,
      "type": "ColorToMask",
      "pos": [
        4804,
        1787
      ],
      "size": {
        "0": 315,
        "1": 178
      },
      "flags": {},
      "order": 137,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 1176
        }
      ],
      "outputs": [
        {
          "name": "MASK",
          "type": "MASK",
          "links": [
            1213
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "ColorToMask"
      },
      "widgets_values": [
        false,
        0,
        0,
        0,
        255,
        16
      ]
    },
    {
      "id": 529,
      "type": "Note",
      "pos": [
        4772.518439387208,
        3348.2411465173304
      ],
      "size": {
        "0": 639.9686889648438,
        "1": 106.79023742675781
      },
      "flags": {},
      "order": 43,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "Option 3 for color matching the subject and preserving its original color, the number 1 complaint y'all had.\n\nA highly experimental and non-deterministic approach to color matching, this node color matches based on light and shadows, resulting in good-ish pictures if the source is not too different from the relit image, and in weird results if the source is radically different from the relit image.\nFor those of you who like to experiment in life."
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 538,
      "type": "MaskToImage",
      "pos": [
        4950,
        2110
      ],
      "size": {
        "0": 210,
        "1": 26
      },
      "flags": {},
      "order": 148,
      "mode": 0,
      "inputs": [
        {
          "name": "mask",
          "type": "MASK",
          "link": 1214
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            1210,
            1211
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "MaskToImage"
      }
    },
    {
      "id": 542,
      "type": "GrowMaskWithBlur",
      "pos": [
        4975,
        2037
      ],
      "size": {
        "0": 315,
        "1": 246
      },
      "flags": {
        "collapsed": true
      },
      "order": 143,
      "mode": 0,
      "inputs": [
        {
          "name": "mask",
          "type": "MASK",
          "link": 1213
        }
      ],
      "outputs": [
        {
          "name": "mask",
          "type": "MASK",
          "links": null,
          "shape": 3,
          "slot_index": 0
        },
        {
          "name": "mask_inverted",
          "type": "MASK",
          "links": [
            1214
          ],
          "shape": 3,
          "slot_index": 1
        }
      ],
      "properties": {
        "Node name for S&R": "GrowMaskWithBlur"
      },
      "widgets_values": [
        -14,
        0,
        true,
        false,
        8.200000000000001,
        1,
        1,
        false
      ]
    },
    {
      "id": 489,
      "type": "Note",
      "pos": [
        3519,
        2136
      ],
      "size": {
        "0": 336.4303283691406,
        "1": 145.63107299804688
      },
      "flags": {},
      "order": 44,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "This Group recalculates the Low Frequency Layer much in the same way we're doing for the High Frequency Layer, by Color Matching the whole relit image with the Original Image as reference, and then masking with SAM to recolor only the subject.\n\nIt then regenerates a new blended low frequency layer."
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 216,
      "type": "EmptyLatentImage",
      "pos": [
        -3061,
        1695
      ],
      "size": {
        "0": 315,
        "1": 106
      },
      "flags": {},
      "order": 45,
      "mode": 0,
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "links": [],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "EmptyLatentImage"
      },
      "widgets_values": [
        1920,
        1080,
        1
      ]
    },
    {
      "id": 188,
      "type": "LoadImageMask",
      "pos": [
        -141,
        1013
      ],
      "size": {
        "0": 315,
        "1": 318
      },
      "flags": {},
      "order": 46,
      "mode": 0,
      "outputs": [
        {
          "name": "MASK",
          "type": "MASK",
          "links": [
            916
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "LoadImageMask"
      },
      "widgets_values": [
        "light (8).png",
        "red",
        "image"
      ]
    },
    {
      "id": 243,
      "type": "PreviewBridge",
      "pos": [
        -513,
        1030
      ],
      "size": {
        "0": 315,
        "1": 290
      },
      "flags": {},
      "order": 117,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 670
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [],
          "shape": 3,
          "slot_index": 0
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": [],
          "shape": 3,
          "slot_index": 1
        }
      ],
      "properties": {
        "Node name for S&R": "PreviewBridge"
      },
      "widgets_values": [
        "$243-0"
      ]
    },
    {
      "id": 306,
      "type": "PreviewImage",
      "pos": [
        968.7117270337422,
        2555.673095142656
      ],
      "size": {
        "0": 210,
        "1": 246
      },
      "flags": {},
      "order": 161,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 763
        }
      ],
      "properties": {
        "Node name for S&R": "PreviewImage"
      }
    },
    {
      "id": 268,
      "type": "JWImageResize",
      "pos": [
        -3754,
        350
      ],
      "size": {
        "0": 315,
        "1": 106
      },
      "flags": {},
      "order": 62,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 926
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            694,
            786,
            788,
            814,
            912,
            1005,
            1143,
            1196
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "JWImageResize"
      },
      "widgets_values": [
        1080,
        1920,
        "bicubic"
      ]
    },
    {
      "id": 291,
      "type": "PreviewImage",
      "pos": [
        1505.711727033742,
        2083.6730951426557
      ],
      "size": {
        "0": 667.4440307617188,
        "1": 675.5693969726562
      },
      "flags": {},
      "order": 171,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 767
        }
      ],
      "properties": {
        "Node name for S&R": "PreviewImage"
      }
    },
    {
      "id": 402,
      "type": "PreviewImage",
      "pos": [
        3580,
        2413
      ],
      "size": {
        "0": 917.359130859375,
        "1": 850.51708984375
      },
      "flags": {},
      "order": 173,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 1149
        }
      ],
      "properties": {
        "Node name for S&R": "PreviewImage"
      }
    },
    {
      "id": 466,
      "type": "ColorMatch",
      "pos": [
        2720,
        1760
      ],
      "size": {
        "0": 315,
        "1": 78
      },
      "flags": {},
      "order": 136,
      "mode": 0,
      "inputs": [
        {
          "name": "image_ref",
          "type": "IMAGE",
          "link": 1143
        },
        {
          "name": "image_target",
          "type": "IMAGE",
          "link": 1142
        }
      ],
      "outputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "links": [
            1104
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "ColorMatch"
      },
      "widgets_values": [
        "mkl"
      ]
    },
    {
      "id": 530,
      "type": "ColorMatch",
      "pos": [
        5213,
        1791
      ],
      "size": {
        "0": 315,
        "1": 78
      },
      "flags": {},
      "order": 138,
      "mode": 0,
      "inputs": [
        {
          "name": "image_ref",
          "type": "IMAGE",
          "link": 1196
        },
        {
          "name": "image_target",
          "type": "IMAGE",
          "link": 1197
        }
      ],
      "outputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "links": [
            1202
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "ColorMatch"
      },
      "widgets_values": [
        "mkl"
      ]
    },
    {
      "id": 468,
      "type": "PreviewImage",
      "pos": [
        3090,
        2000
      ],
      "size": {
        "0": 284.278564453125,
        "1": 293.9009704589844
      },
      "flags": {},
      "order": 156,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 1101
        }
      ],
      "properties": {
        "Node name for S&R": "PreviewImage"
      }
    },
    {
      "id": 479,
      "type": "PreviewImage",
      "pos": [
        4300,
        2024.1689171006947
      ],
      "size": {
        "0": 270.5870056152344,
        "1": 280.7706604003906
      },
      "flags": {},
      "order": 155,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 1129
        }
      ],
      "properties": {
        "Node name for S&R": "PreviewImage"
      }
    },
    {
      "id": 531,
      "type": "PreviewImage",
      "pos": [
        5582.518439387208,
        2038.2411465173338
      ],
      "size": {
        "0": 247.8489227294922,
        "1": 273.5975646972656
      },
      "flags": {},
      "order": 165,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 1198
        }
      ],
      "properties": {
        "Node name for S&R": "PreviewImage"
      }
    },
    {
      "id": 334,
      "type": "VAEEncode",
      "pos": [
        -2992,
        1853
      ],
      "size": {
        "0": 210,
        "1": 46
      },
      "flags": {},
      "order": 69,
      "mode": 0,
      "inputs": [
        {
          "name": "pixels",
          "type": "IMAGE",
          "link": 814
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": 813
        }
      ],
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "links": [
            1216
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "VAEEncode"
      }
    },
    {
      "id": 208,
      "type": "CLIPTextEncode",
      "pos": [
        -3551.2234157985995,
        1214.8891465928905
      ],
      "size": {
        "0": 400,
        "1": 200
      },
      "flags": {},
      "order": 56,
      "mode": 0,
      "inputs": [
        {
          "name": "clip",
          "type": "CLIP",
          "link": 604
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "links": [
            616
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "CLIPTextEncode"
      },
      "widgets_values": [
        "studio light, advertising photography of a perfume on a wood branch"
      ]
    },
    {
      "id": 4,
      "type": "CLIPTextEncode",
      "pos": [
        -80,
        310
      ],
      "size": {
        "0": 400,
        "1": 200
      },
      "flags": {},
      "order": 58,
      "mode": 0,
      "inputs": [
        {
          "name": "clip",
          "type": "CLIP",
          "link": 981
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "links": [
            893
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "CLIPTextEncode"
      },
      "widgets_values": [
        "studio light, advertising photography of a perfume on a wood branch"
      ],
      "color": "#232",
      "bgcolor": "#353"
    },
    {
      "id": 541,
      "type": "PreviewImage",
      "pos": [
        4720,
        2032
      ],
      "size": {
        "0": 192.8850860595703,
        "1": 246
      },
      "flags": {},
      "order": 153,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 1211
        }
      ],
      "properties": {
        "Node name for S&R": "PreviewImage"
      }
    },
    {
      "id": 197,
      "type": "Note",
      "pos": [
        -147,
        1387
      ],
      "size": {
        "0": 309.9846496582031,
        "1": 102.63199615478516
      },
      "flags": {},
      "order": 47,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "You can open import a Mask to use as a light source here, and link it to the Grow Mask With Blur node."
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 417,
      "type": "Note",
      "pos": [
        -861,
        1376
      ],
      "size": {
        "0": 309.9846496582031,
        "1": 102.63199615478516
      },
      "flags": {},
      "order": 48,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "You can open use the Color to Mask node to simulate a \"HDRI\" (veeery loose term here) by turning the lighter areas of the re-background image into a light mask.\nConnect it to the Grow Mask with Blur node."
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 543,
      "type": "Note",
      "pos": [
        -508,
        1373
      ],
      "size": {
        "0": 309.9846496582031,
        "1": 102.63199615478516
      },
      "flags": {},
      "order": 49,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "You can draw your mask here by opening the image in the Mask Editor, and plugging the mask output in the grow mask with blur node."
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 318,
      "type": "AnimeLineArtPreprocessor",
      "pos": [
        -3492,
        2163
      ],
      "size": {
        "0": 315,
        "1": 58
      },
      "flags": {},
      "order": 68,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 788
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            789,
            1217
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "AnimeLineArtPreprocessor"
      },
      "widgets_values": [
        512
      ]
    },
    {
      "id": 544,
      "type": "PreviewImage",
      "pos": [
        -3722,
        2219
      ],
      "size": {
        "0": 210,
        "1": 246
      },
      "flags": {},
      "order": 79,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 1217
        }
      ],
      "properties": {
        "Node name for S&R": "PreviewImage"
      }
    },
    {
      "id": 317,
      "type": "DepthAnythingPreprocessor",
      "pos": [
        -3488,
        1763
      ],
      "size": {
        "0": 315,
        "1": 82
      },
      "flags": {},
      "order": 67,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 786
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            787,
            1218
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "DepthAnythingPreprocessor"
      },
      "widgets_values": [
        "depth_anything_vitl14.pth",
        512
      ]
    },
    {
      "id": 545,
      "type": "PreviewImage",
      "pos": [
        -3718,
        1882
      ],
      "size": {
        "0": 210,
        "1": 246
      },
      "flags": {},
      "order": 78,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 1218
        }
      ],
      "properties": {
        "Node name for S&R": "PreviewImage"
      }
    },
    {
      "id": 210,
      "type": "KSampler",
      "pos": [
        -3041.2234157985995,
        1244.8891465928905
      ],
      "size": {
        "0": 315,
        "1": 262
      },
      "flags": {
        "collapsed": false
      },
      "order": 98,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 801
        },
        {
          "name": "positive",
          "type": "CONDITIONING",
          "link": 791
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "link": 608
        },
        {
          "name": "latent_image",
          "type": "LATENT",
          "link": 1216
        }
      ],
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "links": [
            610
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "KSampler"
      },
      "widgets_values": [
        180794899782057,
        "fixed",
        40,
        3.6,
        "dpmpp_2m_sde",
        "karras",
        0.59
      ]
    },
    {
      "id": 432,
      "type": "JWImageResizeByFactor",
      "pos": [
        2259,
        1023
      ],
      "size": {
        "0": 315,
        "1": 82
      },
      "flags": {},
      "order": 106,
      "mode": 4,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 1126
        },
        {
          "name": "factor",
          "type": "FLOAT",
          "link": 1022,
          "widget": {
            "name": "factor"
          }
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            1127
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "JWImageResizeByFactor"
      },
      "widgets_values": [
        1.5,
        "bicubic"
      ]
    },
    {
      "id": 434,
      "type": "Float",
      "pos": [
        1735,
        773
      ],
      "size": {
        "0": 315,
        "1": 58
      },
      "flags": {},
      "order": 50,
      "mode": 4,
      "outputs": [
        {
          "name": "FLOAT",
          "type": "FLOAT",
          "links": [
            1019,
            1020,
            1021,
            1022,
            1023
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "Float"
      },
      "widgets_values": [
        1.1
      ]
    },
    {
      "id": 472,
      "type": "Image Blending Mode",
      "pos": [
        2714,
        2022
      ],
      "size": {
        "0": 315,
        "1": 102
      },
      "flags": {},
      "order": 163,
      "mode": 0,
      "inputs": [
        {
          "name": "image_a",
          "type": "IMAGE",
          "link": 1113,
          "slot_index": 0
        },
        {
          "name": "image_b",
          "type": "IMAGE",
          "link": 1119
        }
      ],
      "outputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "links": [
            1115
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "Image Blending Mode"
      },
      "widgets_values": [
        "add",
        0.65
      ]
    },
    {
      "id": 535,
      "type": "Image Blending Mode",
      "pos": [
        5213,
        2058
      ],
      "size": {
        "0": 315,
        "1": 102
      },
      "flags": {},
      "order": 166,
      "mode": 0,
      "inputs": [
        {
          "name": "image_a",
          "type": "IMAGE",
          "link": 1204,
          "slot_index": 0
        },
        {
          "name": "image_b",
          "type": "IMAGE",
          "link": 1205
        }
      ],
      "outputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "links": [
            1206
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "Image Blending Mode"
      },
      "widgets_values": [
        "add",
        0.65
      ]
    },
    {
      "id": 484,
      "type": "Image Levels Adjustment",
      "pos": [
        3930,
        2199
      ],
      "size": {
        "0": 315,
        "1": 106
      },
      "flags": {},
      "order": 169,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 1134
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            1149
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "Image Levels Adjustment"
      },
      "widgets_values": [
        81.7,
        1,
        180.8
      ]
    },
    {
      "id": 445,
      "type": "MaskToImage",
      "pos": [
        3573,
        1940
      ],
      "size": {
        "0": 210,
        "1": 26
      },
      "flags": {},
      "order": 96,
      "mode": 0,
      "inputs": [
        {
          "name": "mask",
          "type": "MASK",
          "link": 1030
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            1052
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "MaskToImage"
      }
    },
    {
      "id": 487,
      "type": "Image Blending Mode",
      "pos": [
        3918,
        1748
      ],
      "size": {
        "0": 315,
        "1": 102
      },
      "flags": {},
      "order": 135,
      "mode": 0,
      "inputs": [
        {
          "name": "image_a",
          "type": "IMAGE",
          "link": 1222
        },
        {
          "name": "image_b",
          "type": "IMAGE",
          "link": 1140
        }
      ],
      "outputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "links": [
            1146
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "Image Blending Mode"
      },
      "widgets_values": [
        "hue",
        1
      ]
    },
    {
      "id": 481,
      "type": "ImageGaussianBlur",
      "pos": [
        4295,
        1892
      ],
      "size": {
        "0": 210,
        "1": 58
      },
      "flags": {},
      "order": 150,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 1131
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            1129,
            1133
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "ImageGaussianBlur"
      },
      "widgets_values": [
        50
      ]
    },
    {
      "id": 480,
      "type": "SplitImageWithAlpha",
      "pos": [
        4301,
        1785
      ],
      "size": {
        "0": 185.10531616210938,
        "1": 46
      },
      "flags": {},
      "order": 146,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 1130
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            1131
          ],
          "shape": 3,
          "slot_index": 0
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": null,
          "shape": 3
        }
      ],
      "properties": {
        "Node name for S&R": "SplitImageWithAlpha"
      }
    },
    {
      "id": 433,
      "type": "JWImageResizeByFactor",
      "pos": [
        2266,
        1153
      ],
      "size": {
        "0": 315,
        "1": 82
      },
      "flags": {},
      "order": 105,
      "mode": 4,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 1052
        },
        {
          "name": "factor",
          "type": "FLOAT",
          "link": 1023,
          "widget": {
            "name": "factor"
          }
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            1148
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "JWImageResizeByFactor"
      },
      "widgets_values": [
        1.5,
        "bicubic"
      ]
    },
    {
      "id": 444,
      "type": "GrowMask",
      "pos": [
        3524,
        1803
      ],
      "size": {
        "0": 315,
        "1": 82
      },
      "flags": {},
      "order": 88,
      "mode": 0,
      "inputs": [
        {
          "name": "mask",
          "type": "MASK",
          "link": 1036
        }
      ],
      "outputs": [
        {
          "name": "MASK",
          "type": "MASK",
          "links": [
            1030
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "GrowMask"
      },
      "widgets_values": [
        -4,
        true
      ]
    },
    {
      "id": 471,
      "type": "Image Blend by Mask",
      "pos": [
        2718,
        1878
      ],
      "size": {
        "0": 315,
        "1": 98
      },
      "flags": {},
      "order": 142,
      "mode": 0,
      "inputs": [
        {
          "name": "image_a",
          "type": "IMAGE",
          "link": 1145
        },
        {
          "name": "image_b",
          "type": "IMAGE",
          "link": 1104
        },
        {
          "name": "mask",
          "type": "IMAGE",
          "link": 1127
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            1107
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "Image Blend by Mask"
      },
      "widgets_values": [
        0.74
      ]
    },
    {
      "id": 431,
      "type": "JWImageResizeByFactor",
      "pos": [
        1850,
        1155
      ],
      "size": {
        "0": 315,
        "1": 82
      },
      "flags": {},
      "order": 104,
      "mode": 4,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 1013
        },
        {
          "name": "factor",
          "type": "FLOAT",
          "link": 1021,
          "widget": {
            "name": "factor"
          }
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            1014
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "JWImageResizeByFactor"
      },
      "widgets_values": [
        1.5,
        "bicubic"
      ]
    },
    {
      "id": 305,
      "type": "Image Blend by Mask",
      "pos": [
        758,
        2383
      ],
      "size": {
        "0": 315,
        "1": 98
      },
      "flags": {},
      "order": 159,
      "mode": 0,
      "inputs": [
        {
          "name": "image_a",
          "type": "IMAGE",
          "link": 780
        },
        {
          "name": "image_b",
          "type": "IMAGE",
          "link": 773
        },
        {
          "name": "mask",
          "type": "IMAGE",
          "link": 1014
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            763,
            868,
            1119,
            1150,
            1205
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "Image Blend by Mask"
      },
      "widgets_values": [
        1
      ]
    },
    {
      "id": 483,
      "type": "Image Blending Mode",
      "pos": [
        3923,
        2048
      ],
      "size": {
        "0": 315,
        "1": 102
      },
      "flags": {},
      "order": 164,
      "mode": 0,
      "inputs": [
        {
          "name": "image_a",
          "type": "IMAGE",
          "link": 1133,
          "slot_index": 0
        },
        {
          "name": "image_b",
          "type": "IMAGE",
          "link": 1150
        }
      ],
      "outputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "links": [
            1134
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "Image Blending Mode"
      },
      "widgets_values": [
        "add",
        0.65
      ]
    },
    {
      "id": 482,
      "type": "Image Blend by Mask",
      "pos": [
        3927,
        1899
      ],
      "size": {
        "0": 315,
        "1": 98
      },
      "flags": {},
      "order": 141,
      "mode": 0,
      "inputs": [
        {
          "name": "image_a",
          "type": "IMAGE",
          "link": 1147
        },
        {
          "name": "image_b",
          "type": "IMAGE",
          "link": 1146
        },
        {
          "name": "mask",
          "type": "IMAGE",
          "link": 1148
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            1130
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "Image Blend by Mask"
      },
      "widgets_values": [
        0.47000000000000003
      ]
    },
    {
      "id": 251,
      "type": "LoadImage",
      "pos": [
        -4218,
        330
      ],
      "size": {
        "0": 418.0509033203125,
        "1": 430.6514587402344
      },
      "flags": {},
      "order": 51,
      "mode": 0,
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            926
          ],
          "shape": 3,
          "slot_index": 0
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": null,
          "shape": 3
        }
      ],
      "properties": {
        "Node name for S&R": "LoadImage"
      },
      "widgets_values": [
        "render-2 (3).png",
        "image"
      ]
    },
    {
      "id": 328,
      "type": "ColorToMask",
      "pos": [
        -876,
        1121
      ],
      "size": {
        "0": 315,
        "1": 178
      },
      "flags": {},
      "order": 114,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 804
        }
      ],
      "outputs": [
        {
          "name": "MASK",
          "type": "MASK",
          "links": [],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "ColorToMask"
      },
      "widgets_values": [
        false,
        255,
        255,
        255,
        204,
        16
      ]
    },
    {
      "id": 429,
      "type": "JWImageResizeByFactor",
      "pos": [
        1852,
        1014
      ],
      "size": {
        "0": 315,
        "1": 82
      },
      "flags": {},
      "order": 71,
      "mode": 4,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 1005
        },
        {
          "name": "factor",
          "type": "FLOAT",
          "link": 1020,
          "widget": {
            "name": "factor"
          }
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            1006,
            1222
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "JWImageResizeByFactor"
      },
      "widgets_values": [
        1.5,
        "bicubic"
      ]
    },
    {
      "id": 415,
      "type": "PerturbedAttentionGuidance",
      "pos": [
        -3285,
        556
      ],
      "size": {
        "0": 315,
        "1": 58
      },
      "flags": {},
      "order": 53,
      "mode": 4,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 975
        }
      ],
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": [
            976
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "PerturbedAttentionGuidance"
      },
      "widgets_values": [
        3
      ]
    }
  ],
  "links": [
    [
      77,
      19,
      0,
      7,
      0,
      "LATENT"
    ],
    [
      137,
      37,
      0,
      19,
      0,
      "MODEL"
    ],
    [
      221,
      35,
      0,
      50,
      0,
      "IMAGE"
    ],
    [
      318,
      35,
      0,
      76,
      0,
      "IMAGE"
    ],
    [
      326,
      79,
      0,
      78,
      1,
      "VAE"
    ],
    [
      327,
      79,
      0,
      77,
      2,
      "VAE"
    ],
    [
      328,
      79,
      0,
      7,
      1,
      "VAE"
    ],
    [
      329,
      79,
      0,
      50,
      1,
      "VAE"
    ],
    [
      335,
      77,
      0,
      19,
      1,
      "CONDITIONING"
    ],
    [
      336,
      77,
      1,
      19,
      2,
      "CONDITIONING"
    ],
    [
      339,
      82,
      1,
      85,
      0,
      "CLIP"
    ],
    [
      340,
      82,
      1,
      86,
      0,
      "CLIP"
    ],
    [
      354,
      87,
      0,
      98,
      0,
      "LATENT"
    ],
    [
      355,
      82,
      2,
      98,
      1,
      "VAE"
    ],
    [
      482,
      53,
      0,
      78,
      0,
      "IMAGE"
    ],
    [
      538,
      98,
      0,
      179,
      0,
      "IMAGE"
    ],
    [
      540,
      5,
      0,
      77,
      1,
      "CONDITIONING"
    ],
    [
      545,
      86,
      0,
      87,
      2,
      "CONDITIONING"
    ],
    [
      546,
      181,
      0,
      87,
      3,
      "LATENT"
    ],
    [
      548,
      82,
      0,
      87,
      0,
      "MODEL"
    ],
    [
      560,
      85,
      0,
      87,
      1,
      "CONDITIONING"
    ],
    [
      572,
      75,
      0,
      194,
      0,
      "MASK"
    ],
    [
      573,
      194,
      0,
      35,
      0,
      "MASK"
    ],
    [
      592,
      50,
      0,
      19,
      3,
      "LATENT"
    ],
    [
      593,
      78,
      0,
      77,
      3,
      "LATENT"
    ],
    [
      600,
      205,
      0,
      204,
      0,
      "SAM_MODEL"
    ],
    [
      601,
      206,
      0,
      204,
      1,
      "GROUNDING_DINO_MODEL"
    ],
    [
      603,
      204,
      0,
      207,
      0,
      "IMAGE"
    ],
    [
      604,
      82,
      1,
      208,
      0,
      "CLIP"
    ],
    [
      605,
      82,
      1,
      209,
      0,
      "CLIP"
    ],
    [
      608,
      209,
      0,
      210,
      2,
      "CONDITIONING"
    ],
    [
      610,
      210,
      0,
      211,
      0,
      "LATENT"
    ],
    [
      611,
      82,
      2,
      211,
      1,
      "VAE"
    ],
    [
      612,
      211,
      0,
      212,
      0,
      "IMAGE"
    ],
    [
      614,
      215,
      0,
      214,
      1,
      "CONTROL_NET"
    ],
    [
      616,
      208,
      0,
      214,
      0,
      "CONDITIONING"
    ],
    [
      619,
      212,
      0,
      217,
      0,
      "IMAGE"
    ],
    [
      620,
      204,
      0,
      217,
      1,
      "IMAGE"
    ],
    [
      623,
      219,
      0,
      217,
      2,
      "IMAGE"
    ],
    [
      624,
      217,
      0,
      220,
      0,
      "IMAGE"
    ],
    [
      642,
      7,
      0,
      225,
      0,
      "IMAGE"
    ],
    [
      651,
      225,
      1,
      229,
      0,
      "MASK"
    ],
    [
      652,
      229,
      0,
      227,
      0,
      "MASK"
    ],
    [
      653,
      227,
      0,
      230,
      0,
      "IMAGE"
    ],
    [
      670,
      53,
      0,
      243,
      0,
      "IMAGE"
    ],
    [
      677,
      258,
      0,
      259,
      0,
      "IMAGE"
    ],
    [
      678,
      258,
      0,
      260,
      0,
      "IMAGE"
    ],
    [
      679,
      259,
      0,
      261,
      0,
      "IMAGE"
    ],
    [
      680,
      260,
      0,
      261,
      1,
      "IMAGE"
    ],
    [
      682,
      261,
      0,
      263,
      0,
      "IMAGE"
    ],
    [
      683,
      260,
      0,
      264,
      0,
      "IMAGE"
    ],
    [
      684,
      263,
      0,
      264,
      1,
      "IMAGE"
    ],
    [
      694,
      268,
      0,
      204,
      2,
      "IMAGE"
    ],
    [
      698,
      271,
      0,
      272,
      0,
      "IMAGE"
    ],
    [
      699,
      271,
      0,
      273,
      0,
      "IMAGE"
    ],
    [
      700,
      272,
      0,
      274,
      0,
      "IMAGE"
    ],
    [
      701,
      273,
      0,
      274,
      1,
      "IMAGE"
    ],
    [
      703,
      274,
      0,
      276,
      0,
      "IMAGE"
    ],
    [
      704,
      273,
      0,
      277,
      0,
      "IMAGE"
    ],
    [
      705,
      276,
      0,
      277,
      1,
      "IMAGE"
    ],
    [
      763,
      305,
      0,
      306,
      0,
      "IMAGE"
    ],
    [
      767,
      308,
      0,
      291,
      0,
      "IMAGE"
    ],
    [
      771,
      260,
      0,
      256,
      0,
      "IMAGE"
    ],
    [
      772,
      264,
      0,
      257,
      0,
      "IMAGE"
    ],
    [
      773,
      264,
      0,
      305,
      1,
      "IMAGE"
    ],
    [
      775,
      273,
      0,
      269,
      0,
      "IMAGE"
    ],
    [
      776,
      277,
      0,
      270,
      0,
      "IMAGE"
    ],
    [
      780,
      277,
      0,
      305,
      0,
      "IMAGE"
    ],
    [
      784,
      204,
      1,
      219,
      0,
      "MASK"
    ],
    [
      785,
      316,
      0,
      315,
      1,
      "CONTROL_NET"
    ],
    [
      786,
      268,
      0,
      317,
      0,
      "IMAGE"
    ],
    [
      787,
      317,
      0,
      214,
      2,
      "IMAGE"
    ],
    [
      788,
      268,
      0,
      318,
      0,
      "IMAGE"
    ],
    [
      789,
      318,
      0,
      315,
      2,
      "IMAGE"
    ],
    [
      790,
      214,
      0,
      315,
      0,
      "CONDITIONING"
    ],
    [
      791,
      315,
      0,
      210,
      1,
      "CONDITIONING"
    ],
    [
      792,
      204,
      1,
      319,
      0,
      "MASK"
    ],
    [
      795,
      319,
      0,
      321,
      0,
      "MASK"
    ],
    [
      796,
      321,
      0,
      320,
      0,
      "MASK"
    ],
    [
      797,
      325,
      0,
      324,
      0,
      "MODEL"
    ],
    [
      798,
      325,
      1,
      324,
      1,
      "IPADAPTER"
    ],
    [
      799,
      326,
      0,
      324,
      2,
      "IMAGE"
    ],
    [
      801,
      324,
      0,
      210,
      0,
      "MODEL"
    ],
    [
      804,
      220,
      0,
      328,
      0,
      "IMAGE"
    ],
    [
      813,
      82,
      2,
      334,
      1,
      "VAE"
    ],
    [
      814,
      268,
      0,
      334,
      0,
      "IMAGE"
    ],
    [
      868,
      305,
      0,
      307,
      1,
      "IMAGE"
    ],
    [
      869,
      273,
      0,
      307,
      0,
      "IMAGE"
    ],
    [
      870,
      307,
      0,
      308,
      0,
      "IMAGE"
    ],
    [
      873,
      320,
      0,
      365,
      0,
      "IMAGE"
    ],
    [
      893,
      4,
      0,
      77,
      0,
      "CONDITIONING"
    ],
    [
      898,
      220,
      0,
      53,
      0,
      "IMAGE"
    ],
    [
      908,
      374,
      0,
      373,
      0,
      "SAM_MODEL"
    ],
    [
      909,
      375,
      0,
      373,
      1,
      "GROUNDING_DINO_MODEL"
    ],
    [
      910,
      373,
      0,
      376,
      0,
      "IMAGE"
    ],
    [
      912,
      268,
      0,
      373,
      2,
      "IMAGE"
    ],
    [
      913,
      373,
      1,
      378,
      0,
      "MASK"
    ],
    [
      915,
      378,
      0,
      324,
      4,
      "MASK"
    ],
    [
      916,
      188,
      0,
      75,
      0,
      "MASK"
    ],
    [
      926,
      251,
      0,
      268,
      0,
      "IMAGE"
    ],
    [
      933,
      204,
      1,
      392,
      0,
      "MASK"
    ],
    [
      934,
      373,
      1,
      392,
      1,
      "MASK"
    ],
    [
      935,
      392,
      0,
      393,
      0,
      "MASK"
    ],
    [
      936,
      393,
      0,
      394,
      0,
      "IMAGE"
    ],
    [
      975,
      82,
      0,
      415,
      0,
      "MODEL"
    ],
    [
      976,
      415,
      0,
      325,
      0,
      "MODEL"
    ],
    [
      980,
      324,
      0,
      37,
      0,
      "MODEL"
    ],
    [
      981,
      82,
      1,
      4,
      0,
      "CLIP"
    ],
    [
      982,
      82,
      1,
      5,
      0,
      "CLIP"
    ],
    [
      983,
      82,
      2,
      79,
      0,
      "*"
    ],
    [
      984,
      424,
      0,
      418,
      0,
      "IMAGE"
    ],
    [
      985,
      426,
      1,
      419,
      0,
      "SUPIRVAE"
    ],
    [
      986,
      428,
      0,
      419,
      1,
      "IMAGE"
    ],
    [
      987,
      426,
      0,
      420,
      0,
      "SUPIRMODEL"
    ],
    [
      988,
      423,
      0,
      420,
      1,
      "LATENT"
    ],
    [
      989,
      421,
      0,
      420,
      2,
      "SUPIR_cond_pos"
    ],
    [
      990,
      421,
      1,
      420,
      3,
      "SUPIR_cond_neg"
    ],
    [
      991,
      426,
      0,
      421,
      0,
      "SUPIRMODEL"
    ],
    [
      992,
      419,
      2,
      421,
      1,
      "LATENT"
    ],
    [
      993,
      426,
      1,
      422,
      0,
      "SUPIRVAE"
    ],
    [
      994,
      420,
      0,
      422,
      1,
      "LATENT"
    ],
    [
      995,
      419,
      0,
      423,
      0,
      "SUPIRVAE"
    ],
    [
      996,
      419,
      1,
      423,
      1,
      "IMAGE"
    ],
    [
      997,
      428,
      0,
      424,
      0,
      "IMAGE"
    ],
    [
      998,
      422,
      0,
      424,
      1,
      "IMAGE"
    ],
    [
      999,
      424,
      0,
      425,
      1,
      "IMAGE"
    ],
    [
      1000,
      427,
      0,
      426,
      0,
      "MODEL"
    ],
    [
      1001,
      427,
      1,
      426,
      1,
      "CLIP"
    ],
    [
      1002,
      427,
      2,
      426,
      2,
      "VAE"
    ],
    [
      1003,
      225,
      0,
      428,
      0,
      "IMAGE"
    ],
    [
      1004,
      424,
      0,
      271,
      0,
      "IMAGE"
    ],
    [
      1005,
      268,
      0,
      429,
      0,
      "IMAGE"
    ],
    [
      1006,
      429,
      0,
      258,
      0,
      "IMAGE"
    ],
    [
      1007,
      225,
      0,
      425,
      0,
      "IMAGE"
    ],
    [
      1013,
      320,
      0,
      431,
      0,
      "IMAGE"
    ],
    [
      1014,
      431,
      0,
      305,
      2,
      "IMAGE"
    ],
    [
      1019,
      434,
      0,
      428,
      1,
      "FLOAT"
    ],
    [
      1020,
      434,
      0,
      429,
      1,
      "FLOAT"
    ],
    [
      1021,
      434,
      0,
      431,
      1,
      "FLOAT"
    ],
    [
      1022,
      434,
      0,
      432,
      1,
      "FLOAT"
    ],
    [
      1023,
      434,
      0,
      433,
      1,
      "FLOAT"
    ],
    [
      1030,
      444,
      0,
      445,
      0,
      "MASK"
    ],
    [
      1036,
      319,
      0,
      444,
      0,
      "MASK"
    ],
    [
      1052,
      445,
      0,
      433,
      0,
      "IMAGE"
    ],
    [
      1101,
      470,
      0,
      468,
      0,
      "IMAGE"
    ],
    [
      1102,
      469,
      0,
      470,
      0,
      "IMAGE"
    ],
    [
      1104,
      466,
      0,
      471,
      1,
      "IMAGE"
    ],
    [
      1107,
      471,
      0,
      469,
      0,
      "IMAGE"
    ],
    [
      1113,
      470,
      0,
      472,
      0,
      "IMAGE"
    ],
    [
      1115,
      472,
      0,
      475,
      0,
      "IMAGE"
    ],
    [
      1119,
      305,
      0,
      472,
      1,
      "IMAGE"
    ],
    [
      1124,
      475,
      0,
      331,
      0,
      "IMAGE"
    ],
    [
      1125,
      476,
      0,
      477,
      0,
      "MASK"
    ],
    [
      1126,
      477,
      0,
      432,
      0,
      "IMAGE"
    ],
    [
      1127,
      432,
      0,
      471,
      2,
      "IMAGE"
    ],
    [
      1128,
      319,
      0,
      476,
      0,
      "MASK"
    ],
    [
      1129,
      481,
      0,
      479,
      0,
      "IMAGE"
    ],
    [
      1130,
      482,
      0,
      480,
      0,
      "IMAGE"
    ],
    [
      1131,
      480,
      0,
      481,
      0,
      "IMAGE"
    ],
    [
      1133,
      481,
      0,
      483,
      0,
      "IMAGE"
    ],
    [
      1134,
      483,
      0,
      484,
      0,
      "IMAGE"
    ],
    [
      1140,
      424,
      0,
      487,
      1,
      "IMAGE"
    ],
    [
      1142,
      424,
      0,
      466,
      1,
      "IMAGE"
    ],
    [
      1143,
      268,
      0,
      466,
      0,
      "IMAGE"
    ],
    [
      1145,
      424,
      0,
      471,
      0,
      "IMAGE"
    ],
    [
      1146,
      487,
      0,
      482,
      1,
      "IMAGE"
    ],
    [
      1147,
      424,
      0,
      482,
      0,
      "IMAGE"
    ],
    [
      1148,
      433,
      0,
      482,
      2,
      "IMAGE"
    ],
    [
      1149,
      484,
      0,
      402,
      0,
      "IMAGE"
    ],
    [
      1150,
      305,
      0,
      483,
      1,
      "IMAGE"
    ],
    [
      1176,
      424,
      0,
      515,
      0,
      "IMAGE"
    ],
    [
      1195,
      536,
      0,
      528,
      0,
      "IMAGE"
    ],
    [
      1196,
      268,
      0,
      530,
      0,
      "IMAGE"
    ],
    [
      1197,
      424,
      0,
      530,
      1,
      "IMAGE"
    ],
    [
      1198,
      533,
      0,
      531,
      0,
      "IMAGE"
    ],
    [
      1199,
      534,
      0,
      532,
      0,
      "IMAGE"
    ],
    [
      1200,
      532,
      0,
      533,
      0,
      "IMAGE"
    ],
    [
      1201,
      424,
      0,
      534,
      0,
      "IMAGE"
    ],
    [
      1202,
      530,
      0,
      534,
      1,
      "IMAGE"
    ],
    [
      1204,
      533,
      0,
      535,
      0,
      "IMAGE"
    ],
    [
      1205,
      305,
      0,
      535,
      1,
      "IMAGE"
    ],
    [
      1206,
      535,
      0,
      536,
      0,
      "IMAGE"
    ],
    [
      1210,
      538,
      0,
      534,
      2,
      "IMAGE"
    ],
    [
      1211,
      538,
      0,
      541,
      0,
      "IMAGE"
    ],
    [
      1213,
      515,
      0,
      542,
      0,
      "MASK"
    ],
    [
      1214,
      542,
      1,
      538,
      0,
      "MASK"
    ],
    [
      1216,
      334,
      0,
      210,
      3,
      "LATENT"
    ],
    [
      1217,
      318,
      0,
      544,
      0,
      "IMAGE"
    ],
    [
      1218,
      317,
      0,
      545,
      0,
      "IMAGE"
    ],
    [
      1222,
      429,
      0,
      487,
      0,
      "IMAGE"
    ]
  ],
  "groups": [
    {
      "title": "relight",
      "bounding": [
        -975,
        -50,
        2638,
        1573
      ],
      "color": "#3f789e",
      "font_size": 24,
      "locked": false
    },
    {
      "title": "Generate Still Life Product Shot",
      "bounding": [
        -2820,
        187,
        1809,
        881
      ],
      "color": "#3f789e",
      "font_size": 24,
      "locked": false
    },
    {
      "title": "Background Generator",
      "bounding": [
        -3739,
        1105,
        1674,
        1408
      ],
      "color": "#3f789e",
      "font_size": 24,
      "locked": false
    },
    {
      "title": "Segment Anything",
      "bounding": [
        -2040,
        1103,
        1033,
        924
      ],
      "color": "#b06634",
      "font_size": 24,
      "locked": false
    },
    {
      "title": "Blend original subject on top of background",
      "bounding": [
        -2043,
        2415,
        1029,
        677
      ],
      "color": "#3f789e",
      "font_size": 24,
      "locked": false
    },
    {
      "title": "Start from existing product image",
      "bounding": [
        -4313,
        180,
        927,
        864
      ],
      "color": "#A88",
      "font_size": 24,
      "locked": false
    },
    {
      "title": "(Optional) Preserve details, such as words, from the original image",
      "bounding": [
        -944,
        1619,
        3165,
        1482
      ],
      "color": "#3f789e",
      "font_size": 24,
      "locked": false
    },
    {
      "title": "Frequency Separation for Original Image",
      "bounding": [
        -299,
        1670,
        962,
        648
      ],
      "color": "#A88",
      "font_size": 24,
      "locked": false
    },
    {
      "title": "Frequency Separation for Relit Image",
      "bounding": [
        -306,
        2342,
        984,
        693
      ],
      "color": "#A88",
      "font_size": 24,
      "locked": false
    },
    {
      "title": "Blend High Frequency Layers",
      "bounding": [
        702,
        2048,
        736,
        797
      ],
      "color": "#A88",
      "font_size": 24,
      "locked": false
    },
    {
      "title": "Mask (if you decide to use a custom one from the Preview Bridge node above)",
      "bounding": [
        704,
        1667,
        949,
        357
      ],
      "color": "#8A8",
      "font_size": 24,
      "locked": false
    },
    {
      "title": "Mask (if you decide to use the mask from SAM))",
      "bounding": [
        -908,
        1677,
        536,
        738
      ],
      "color": "#8A8",
      "font_size": 24,
      "locked": false
    },
    {
      "title": "IPAdapter for Background or Selective Parts",
      "bounding": [
        -4591,
        1107,
        820,
        711
      ],
      "color": "#88A",
      "font_size": 24,
      "locked": false
    },
    {
      "title": "Color Match (Option 1)",
      "bounding": [
        2252,
        1622,
        1193,
        1884
      ],
      "color": "#b58b2a",
      "font_size": 24,
      "locked": false
    },
    {
      "title": "SAM for IPAdapter Attention Mask",
      "bounding": [
        -4837,
        1840,
        1071,
        962
      ],
      "color": "#b06634",
      "font_size": 24,
      "locked": false
    },
    {
      "title": "Mask Alternatives Group",
      "bounding": [
        -898,
        800,
        1869,
        700
      ],
      "color": "#8A8",
      "font_size": 24,
      "locked": false
    },
    {
      "title": "(Optional) Multi SAM Mask Composite",
      "bounding": [
        -2036,
        2044,
        1027,
        359
      ],
      "color": "#3f789e",
      "font_size": 24,
      "locked": false
    },
    {
      "title": "Color Match (Option 2)",
      "bounding": [
        3464,
        1621,
        1161,
        1876
      ],
      "color": "#3f789e",
      "font_size": 24,
      "locked": false
    },
    {
      "title": "Model(s)",
      "bounding": [
        -3366,
        180,
        518,
        879
      ],
      "color": "#3f789e",
      "font_size": 24,
      "locked": false
    },
    {
      "title": "Upscaler",
      "bounding": [
        1704,
        248,
        2446,
        1276
      ],
      "color": "#3f789e",
      "font_size": 24,
      "locked": false
    },
    {
      "title": "Upscale Original Image and SAM",
      "bounding": [
        1779,
        934,
        858,
        336
      ],
      "color": "#8A8",
      "font_size": 24,
      "locked": false
    },
    {
      "title": "Blend Low Frequency Layers for Color Match",
      "bounding": [
        3479,
        1682,
        1117,
        669
      ],
      "color": "#A88",
      "font_size": 24,
      "locked": false
    },
    {
      "title": "Blend Low Frequency Layers for Color Match",
      "bounding": [
        2272,
        1684,
        1137,
        667
      ],
      "color": "#A88",
      "font_size": 24,
      "locked": false
    },
    {
      "title": "Color Match (Option 3)",
      "bounding": [
        4646,
        1621,
        1261,
        1876
      ],
      "color": "#8AA",
      "font_size": 24,
      "locked": false
    },
    {
      "title": "Blend Low Frequency Layers for Color Match",
      "bounding": [
        4669,
        1686,
        1180,
        683
      ],
      "color": "#3f789e",
      "font_size": 24,
      "locked": false
    }
  ],
  "config": {},
  "extra": {},
  "version": 0.4
}